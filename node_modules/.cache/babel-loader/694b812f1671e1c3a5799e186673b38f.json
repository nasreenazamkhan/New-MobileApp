{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{IonPage,IonLabel,IonCard,IonIcon}from\"@ionic/react\";import Store from\"../../../redux/Store\";import Header from\"../../../components/Header\";import TxtInput from\"../../../components/txtinput/TxtInput\";import MapView from\"../../MapView\";import*as EndPointURL from\"../../../util/EndPointURL\";import DropDownInput from\"../../../components/dropdownInput/DrpdownInput\";import*as Utils from\"../../../util/Utilities\";import{closeOutline}from\"ionicons/icons\";//import * as reduxActions from \"../../redux/actionTypes/AllActionTypes\";\nimport{httpGetCallWithoutHeader,httpPostCallWithoutHeaderAndWithBody}from\"../../../services/EndPointApi\";import*as reduxActions from\"../../../redux/actions/AllActions\";import{useHistory}from\"react-router-dom\";import\"./AddNewAddress.scss\";export default function AddNewAddress(props){var _props$history$locati3,_props$history$locati4,_props$history$locati5,_props$history$locati6,_address$consigneeCon,_address$consigneeCon2,_address$phoneNumber,_address$phoneNumber2;console.log(\"AddNewAddress\",props);let history=useHistory();const[allZones,setAllZones]=useState([]);const[errorMessage,setErrorMessage]=useState(\"\");const[address,setAddress]=useState({consigneeContactName:\"\",consigneeContactNumber:\"\",dropAddress:\"\",selectedDropZoneLabel:\"Jafza North\",dropZone:\"JAFZAN\",addressNickname:\"\",addressLine1:\"\",phoneNumber:\"\",createMode:true,latLng:\"\"});const[error,setError]=useState({errorName:\"\",errorMobile:\"\",errorDropAddr:\"\",errorDropZone:\"\",errorNickName:\"\",errorAddrLine:\"\",errorPhone:\"\",mapError:\"\"});useEffect(()=>{var _props$history$locati;var add;console.log(\"props\",props.history.location.state);if((_props$history$locati=props.history.location.state)===null||_props$history$locati===void 0?void 0:_props$history$locati.isContainerEdit){var _props$history$locati2;add=(_props$history$locati2=props.history.location.state)===null||_props$history$locati2===void 0?void 0:_props$history$locati2.contact;setAddress(add);}else{props.history.location.state?setAddress(props.history.location.state):setAddress(address);}var response=httpGetCallWithoutHeader(EndPointURL.allZone);response.then(result=>{if(result===null||result===void 0?void 0:result.success){var _result$data,_result$data$data;// if(props.history.location.state?.isContainerEdit) {\n//     var dZ = result.data.data.dataItems.find((element) => {\n//         return element.value === add.dropZone;\n//       });\n//     console.log(\"DZ\", dZ);\n//     add.selectedDropZoneLabel = dZ.label;\n//     console.log(add);\n//     setAddress(add);\n// }\nsetAllZones(result===null||result===void 0?void 0:(_result$data=result.data)===null||_result$data===void 0?void 0:(_result$data$data=_result$data.data)===null||_result$data$data===void 0?void 0:_result$data$data.dataItems);}});},[]);function getZone(e,value){console.log(e.target.name,e.target.value,e.target.label);console.log(e.target.name,value);setError({...error,errorDropZone:\"\"});setAddress({...address,dropZone:value,selectedDropZoneLabel:e.target.label,dropAddress:\"\",latLng:\"\"});console.log(\"add\",address);}function handlePhoneNumber(e,value){setAddress({...address,phoneNumber:value?\"971\"+value*1:\"\"});var nameTest=Utils.validatePhone(value);if(value){if(!nameTest){setError({...error,errorPhone:\"Please Enter 8 digit number\"});}else{setError({...error,errorPhone:\"\"});}setErrorMessage(\"\");}}function handleContactName(e,value){setAddress({...address,consigneeContactName:value});setError({...error,errorName:\"\"});}function handleMobileNumber(e,value){setAddress({...address,consigneeContactNumber:value?\"971\"+value*1:\"\"});var nameTest=Utils.validateMobile(value,9);if(value){if(!nameTest){setError({...error,errorMobile:\"Please Enter 9 digit number\"});}else{setError({...error,errorMobile:\"\"});}setErrorMessage(\"\");}}function handleLandMark(e,value){setAddress({...address,addressLine1:value});setError({...error,errorAddrLine:\"\"});}function handleAddressNickName(e,value){setAddress({...address,addressNickname:value});setError({...error,errorNickName:\"\"});}function addOrUpdate(){var validate=true;for(var key in address){if((address[key]===\"\"||address[key]===null||address[key]===\"9710\")&&key!=\"isActive\"){if(key!=\"addressLine1\"){validate=false;if(key==\"consigneeContactName\"){error.errorName=\"Contact Name is blank\";}if(key==\"dropAddress\"||key==\"latLng\"){error.errorDropAddr=\"Drop address is blank\";}if(key==\"dropZone\"){error.errorDropZone=\"Drop Zone is blank\";}if(key==\"addressNickname\"){error.errorNickName=\"Nick name is blank\";}if(key==\"consigneeContactNumber\"){error.errorMobile=\"Mobile Number is blank\";}if(key==\"phoneNumber\"){error.errorPhone=\"Phone Number is blank\";}setError({...error});setErrorMessage(\"Please Fill all the fields\");}}}if(validate){if(address.createMode){saveAddress();}else{props.history.location.state.bookTruck?updateBookTruckContact():props.history.location.state.isContainerEdit?updateContainerContact():updateAddress();// props.history.location.state.isContainerEdit\n//   ? updateContainerContact()\n//   : props.history.location.state.bookTruck\n//   ? updateBookTruckContact()\n//   : updateAddress();\n}}}const updateBookTruckContact=()=>{if(!props.history.location.state.bookTruck.multiLocAndTime){var temp=address;var addrObj={...temp,address:address};var updatedAddress=reduxActions.bookTruckUpdateAddress(addrObj);if(updatedAddress)Store.dispatch(updatedAddress);}else{var temp=address;var payLoad={containerNumber:props.history.location.state.bookTruck.containerNum,element:{...temp,address:address}};var updateMultiAddress=reduxActions.booktruckUpdateOtherData(payLoad);if(updateMultiAddress)Store.dispatch(updateMultiAddress);}history.push(\"/bookTruckTab/location\");};const updateContainerContact=async()=>{var data=props.history.location.state;data.containerList.map(c=>{if(c.container_number==address.ctnNumber){c.consigneeContactName=address.consigneeContactName;c.addressLine1=address.addressLine1;c.phoneNumber=address.phoneNumber;c.consigneeContactNumber=address.consigneeContactNumber;}});var cont=data.containerList;var request={consigneeContactNumber:address.consigneeContactNumber,phoneNumber:address.phoneNumber,addressLine1:address.addressLine1,consigneeContactName:address.consigneeContactName,container_number:address.ctnNumber,dpwTransactionId:address.dpwTransactionId,requestDetailsNumber:address.requestDetailsNumber};let response=await httpPostCallWithoutHeaderAndWithBody(EndPointURL.contacDetailsUpdateUrl,request);if(await response.success){var _data$booking,_data$booking2;console.log(\"bookingData\",data.booking);let booking={// booking: data.booking?.booking,\n// bookingNumber : data.booking.bookingNumber,\nbookingDetails:data.bookingDetails,containers:cont,userType:(_data$booking=data.booking)===null||_data$booking===void 0?void 0:_data$booking.userType,// status: data.booking?.status,\nstatus:(_data$booking2=data.booking)===null||_data$booking2===void 0?void 0:_data$booking2.cardStatus};history.push(\"/containerDetails\",booking);}};function updateAddress(){let newAddress=address;var response=httpPostCallWithoutHeaderAndWithBody(EndPointURL.updateAddress,newAddress);response.then(result=>{if(result.success){var address=reduxActions.updateAddress(newAddress);if(address)Store.dispatch(address);props.history.goBack();}});}function saveAddress(){let newAddress=address;var response=httpPostCallWithoutHeaderAndWithBody(EndPointURL.addAddress,newAddress);response.then(result=>{if(result.success){var address=reduxActions.addAddress(newAddress);if(address)Store.dispatch(address);props.history.goBack();}});}function handleAddress(e){console.log(\"loc\",JSON.stringify(e.loc));setAddress({...address,dropAddress:e.add,latLng:JSON.stringify(e.loc)});setError({...error,errorDropAddr:\"\"});}const mapViewProps={getAddressFromMap:handleAddress,zone:address.dropZone,latLng:address.latLng?JSON.parse(address.latLng):address.latLng,selectedAdd:address.dropAddress,isContainerEdit:(_props$history$locati3=props.history.location.state)===null||_props$history$locati3===void 0?void 0:_props$history$locati3.isContainerEdit,handleError:e=>{setError({...error,mapError:e});}};return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(Header,{label:address.createMode?\"Add address\":\"Edit Address\",action:\"check\",checkClick:()=>{addOrUpdate();}}),/*#__PURE__*/React.createElement(IonCard,{className:\"mapCard\"},/*#__PURE__*/React.createElement(MapView,{mapViewProps:mapViewProps})),/*#__PURE__*/React.createElement(IonLabel,{className:\"redColor\",hidden:error.mapError==\"\"},error.mapError,/*#__PURE__*/React.createElement(IonIcon,{icon:closeOutline,slot:\"icon-only\",className:\"closeIconMap\",onClick:()=>{setError({...error,mapError:\"\"});}})),/*#__PURE__*/React.createElement(IonLabel,{className:\"redColor\",hidden:errorMessage==\"\"},errorMessage),/*#__PURE__*/React.createElement(IonCard,{className:\"scrollCard\"},/*#__PURE__*/React.createElement(DropDownInput,{name:\"dropZone\",value:address.dropZone,label:\"Zone\",errors:error.errorDropZone,type:\"text\",required:true,onChange:getZone,datatype:\"TEXT\",placeholder:\"Zone\",listValues:allZones,selectedName:address.selectedDropZoneLabel,disabled:(_props$history$locati4=props.history.location.state)===null||_props$history$locati4===void 0?void 0:_props$history$locati4.isContainerEdit}),/*#__PURE__*/React.createElement(TxtInput,{name:\"dropAddress\",value:address.dropAddress,label:\"Drop Address\",errors:error.errorDropAddr,type:\"text\",required:true,readonly:true,datatype:\"TEXT\",placeholder:\"Select Location\"}),/*#__PURE__*/React.createElement(TxtInput,{name:\"addressLine1\",value:address.addressLine1,label:\"Addresss Line 1\",errors:error.errorAddrLine,type:\"text\",required:true,readonly:(_props$history$locati5=props.history.location.state)===null||_props$history$locati5===void 0?void 0:_props$history$locati5.isContainerEdit,onChange:handleLandMark,datatype:\"TEXT\",placeholder:\"Addresss Line 1\"}),!((_props$history$locati6=props.history.location.state)===null||_props$history$locati6===void 0?void 0:_props$history$locati6.isContainerEdit)&&/*#__PURE__*/React.createElement(TxtInput,{name:\"nickName\",value:address.addressNickname,label:\"Nick Name\",errors:error.errorNickName,type:\"text\",required:true,onChange:handleAddressNickName,datatype:\"TEXT\",placeholder:\"Nick Name\"}),/*#__PURE__*/React.createElement(TxtInput,{name:\"contactName\",value:address.consigneeContactName,label:\"Contact Person\",errors:error.errorName,type:\"text\",required:true,onChange:handleContactName,datatype:\"TEXT\",placeholder:\"Contact Person\"}),/*#__PURE__*/React.createElement(TxtInput,{name:\"mobileNumber\",value:(address===null||address===void 0?void 0:(_address$consigneeCon=address.consigneeContactNumber)===null||_address$consigneeCon===void 0?void 0:_address$consigneeCon.split(\"971\")[1])?address===null||address===void 0?void 0:(_address$consigneeCon2=address.consigneeContactNumber)===null||_address$consigneeCon2===void 0?void 0:_address$consigneeCon2.split(\"971\")[1]:address.consigneeContactNumber,label:\"Mobile Number\",errors:error.errorMobile,type:\"tel\",required:true,onChange:handleMobileNumber,datatype:\"TEXT\",placeholder:\"Mobile Number\",max:9}),/*#__PURE__*/React.createElement(TxtInput,{name:\"phoneNumber\",value:((_address$phoneNumber=address.phoneNumber)===null||_address$phoneNumber===void 0?void 0:_address$phoneNumber.split(\"971\")[1])?address===null||address===void 0?void 0:(_address$phoneNumber2=address.phoneNumber)===null||_address$phoneNumber2===void 0?void 0:_address$phoneNumber2.split(\"971\")[1]:address.phoneNumber,label:\"Phone Number\",errors:error.errorPhone,type:\"tel\",required:true,onChange:handlePhoneNumber,datatype:\"TEXT\",placeholder:\"Phone Number\",max:8})));}","map":{"version":3,"sources":["D:/DT/ptmsCheckOutNew/New-MobileApp/src/pages/address/addAddress/AddNewAddress.tsx"],"names":["React","useState","useEffect","IonPage","IonLabel","IonCard","IonIcon","Store","Header","TxtInput","MapView","EndPointURL","DropDownInput","Utils","closeOutline","httpGetCallWithoutHeader","httpPostCallWithoutHeaderAndWithBody","reduxActions","useHistory","AddNewAddress","props","console","log","history","allZones","setAllZones","errorMessage","setErrorMessage","address","setAddress","consigneeContactName","consigneeContactNumber","dropAddress","selectedDropZoneLabel","dropZone","addressNickname","addressLine1","phoneNumber","createMode","latLng","error","setError","errorName","errorMobile","errorDropAddr","errorDropZone","errorNickName","errorAddrLine","errorPhone","mapError","add","location","state","isContainerEdit","contact","response","allZone","then","result","success","data","dataItems","getZone","e","value","target","name","label","handlePhoneNumber","nameTest","validatePhone","handleContactName","handleMobileNumber","validateMobile","handleLandMark","handleAddressNickName","addOrUpdate","validate","key","saveAddress","bookTruck","updateBookTruckContact","updateContainerContact","updateAddress","multiLocAndTime","temp","addrObj","updatedAddress","bookTruckUpdateAddress","dispatch","payLoad","containerNumber","containerNum","element","updateMultiAddress","booktruckUpdateOtherData","push","containerList","map","c","container_number","ctnNumber","cont","request","dpwTransactionId","requestDetailsNumber","contacDetailsUpdateUrl","booking","bookingDetails","containers","userType","status","cardStatus","newAddress","goBack","addAddress","handleAddress","JSON","stringify","loc","mapViewProps","getAddressFromMap","zone","parse","selectedAdd","handleError","split"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { IonPage, IonLabel, IonCard, IonIcon } from \"@ionic/react\";\r\nimport Store from \"../../../redux/Store\";\r\nimport Header from \"../../../components/Header\";\r\nimport TxtInput from \"../../../components/txtinput/TxtInput\";\r\nimport MapView from \"../../MapView\";\r\nimport * as EndPointURL from \"../../../util/EndPointURL\";\r\nimport DropDownInput from \"../../../components/dropdownInput/DrpdownInput\";\r\nimport * as Utils from \"../../../util/Utilities\";\r\nimport { closeOutline } from \"ionicons/icons\";\r\n//import * as reduxActions from \"../../redux/actionTypes/AllActionTypes\";\r\nimport {\r\n  httpGetCallWithoutHeader,\r\n  httpPostCallWithoutHeaderAndWithBody,\r\n} from \"../../../services/EndPointApi\";\r\nimport * as reduxActions from \"../../../redux/actions/AllActions\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport \"./AddNewAddress.scss\";\r\n\r\nexport default function AddNewAddress(props: any) {\r\n  console.log(\"AddNewAddress\",props)\r\n  let history = useHistory();\r\n  const [allZones, setAllZones] = useState([]);\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [address, setAddress] = useState<any>({\r\n    consigneeContactName: \"\",\r\n    consigneeContactNumber: \"\",\r\n    dropAddress: \"\",\r\n    selectedDropZoneLabel: \"Jafza North\",\r\n    dropZone: \"JAFZAN\",\r\n    addressNickname: \"\",\r\n    addressLine1: \"\",\r\n    phoneNumber: \"\",\r\n    createMode: true,\r\n    latLng: \"\",\r\n  });\r\n  const [error, setError] = useState({\r\n    errorName: \"\",\r\n    errorMobile: \"\",\r\n    errorDropAddr: \"\",\r\n    errorDropZone: \"\",\r\n    errorNickName: \"\",\r\n    errorAddrLine: \"\",\r\n    errorPhone: \"\",\r\n    mapError: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    var add;\r\n    console.log(\"props\", props.history.location.state);\r\n    if (props.history.location.state?.isContainerEdit) {\r\n      add = props.history.location.state?.contact;\r\n      setAddress(add);\r\n    } else {\r\n      props.history.location.state\r\n        ? setAddress(props.history.location.state)\r\n        : setAddress(address);\r\n    }\r\n\r\n    var response = httpGetCallWithoutHeader(EndPointURL.allZone);\r\n    response.then((result) => {\r\n      if (result?.success) {\r\n        // if(props.history.location.state?.isContainerEdit) {\r\n        //     var dZ = result.data.data.dataItems.find((element) => {\r\n        //         return element.value === add.dropZone;\r\n        //       });\r\n        //     console.log(\"DZ\", dZ);\r\n        //     add.selectedDropZoneLabel = dZ.label;\r\n        //     console.log(add);\r\n        //     setAddress(add);\r\n        // }\r\n\r\n        setAllZones(result?.data?.data?.dataItems);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  function getZone(e: any, value: any) {\r\n    console.log(e.target.name, e.target.value, e.target.label);\r\n    console.log(e.target.name, value);\r\n    setError({\r\n      ...error,\r\n      errorDropZone: \"\",\r\n    });\r\n    setAddress({\r\n      ...address,\r\n      dropZone: value,\r\n      selectedDropZoneLabel: e.target.label,\r\n      dropAddress: \"\",\r\n      latLng: \"\",\r\n    });\r\n    console.log(\"add\", address);\r\n  }\r\n\r\n  function handlePhoneNumber(e: any, value: any) {\r\n    setAddress({\r\n      ...address,\r\n      phoneNumber: value ? \"971\" + value * 1 : \"\",\r\n    });\r\n    var nameTest = Utils.validatePhone(value);\r\n    if (value) {\r\n      if (!nameTest) {\r\n        setError({\r\n          ...error,\r\n          errorPhone: \"Please Enter 8 digit number\",\r\n        });\r\n      } else {\r\n        setError({\r\n          ...error,\r\n          errorPhone: \"\",\r\n        });\r\n      }\r\n      setErrorMessage(\"\");\r\n    }\r\n  }\r\n\r\n  function handleContactName(e: any, value: any) {\r\n    setAddress({\r\n      ...address,\r\n      consigneeContactName: value,\r\n    });\r\n    setError({\r\n      ...error,\r\n      errorName: \"\",\r\n    });\r\n  }\r\n\r\n  function handleMobileNumber(e: any, value: any) {\r\n    setAddress({\r\n      ...address,\r\n      consigneeContactNumber: value ? \"971\" + value * 1 : \"\",\r\n    });\r\n    var nameTest = Utils.validateMobile(value, 9);\r\n    if (value) {\r\n      if (!nameTest) {\r\n        setError({\r\n          ...error,\r\n          errorMobile: \"Please Enter 9 digit number\",\r\n        });\r\n      } else {\r\n        setError({\r\n          ...error,\r\n          errorMobile: \"\",\r\n        });\r\n      }\r\n      setErrorMessage(\"\");\r\n    }\r\n  }\r\n\r\n  function handleLandMark(e: any, value: any) {\r\n    setAddress({\r\n      ...address,\r\n      addressLine1: value,\r\n    });\r\n    setError({\r\n      ...error,\r\n      errorAddrLine: \"\",\r\n    });\r\n  }\r\n\r\n  function handleAddressNickName(e: any, value: any) {\r\n    setAddress({\r\n      ...address,\r\n      addressNickname: value,\r\n    });\r\n    setError({\r\n      ...error,\r\n      errorNickName: \"\",\r\n    });\r\n  }\r\n\r\n  function addOrUpdate() {\r\n    var validate = true;\r\n    for (var key in address) {\r\n      if (\r\n        (address[key] === \"\" ||\r\n          address[key] === null ||\r\n          address[key] === \"9710\") &&\r\n        key != \"isActive\"\r\n      ) {\r\n        if (key != \"addressLine1\") {\r\n          validate = false;\r\n          if (key == \"consigneeContactName\") {\r\n            error.errorName = \"Contact Name is blank\";\r\n          }\r\n          if (key == \"dropAddress\" || key == \"latLng\") {\r\n            error.errorDropAddr = \"Drop address is blank\";\r\n          }\r\n          if (key == \"dropZone\") {\r\n            error.errorDropZone = \"Drop Zone is blank\";\r\n          }\r\n          if (key == \"addressNickname\") {\r\n            error.errorNickName = \"Nick name is blank\";\r\n          }\r\n          if (key == \"consigneeContactNumber\") {\r\n            error.errorMobile = \"Mobile Number is blank\";\r\n          }\r\n          if (key == \"phoneNumber\") {\r\n            error.errorPhone = \"Phone Number is blank\";\r\n          }\r\n          setError({ ...error });\r\n          setErrorMessage(\"Please Fill all the fields\");\r\n        }\r\n      }\r\n    }\r\n\r\n    if (validate) {\r\n      if (address.createMode) {\r\n        saveAddress();\r\n      } else {\r\n        props.history.location.state.bookTruck\r\n          ? updateBookTruckContact()\r\n          : props.history.location.state.isContainerEdit\r\n          ? updateContainerContact()\r\n          : updateAddress();\r\n        // props.history.location.state.isContainerEdit\r\n        //   ? updateContainerContact()\r\n        //   : props.history.location.state.bookTruck\r\n        //   ? updateBookTruckContact()\r\n        //   : updateAddress();\r\n      }\r\n    }\r\n  }\r\n  const updateBookTruckContact = () => {\r\n    if (!props.history.location.state.bookTruck.multiLocAndTime) {\r\n      var temp = address;\r\n      var addrObj = { ...temp, address: address };\r\n      var updatedAddress = reduxActions.bookTruckUpdateAddress(addrObj);\r\n      if (updatedAddress) Store.dispatch(updatedAddress);\r\n    } else {\r\n      var temp = address;\r\n      var payLoad = {\r\n        containerNumber: props.history.location.state.bookTruck.containerNum,\r\n        element: { ...temp, address: address },\r\n      };\r\n\r\n      var updateMultiAddress = reduxActions.booktruckUpdateOtherData(payLoad);\r\n      if (updateMultiAddress) Store.dispatch(updateMultiAddress);\r\n    }\r\n    history.push(\"/bookTruckTab/location\");\r\n  };\r\n  const updateContainerContact = async () => {\r\n    var data = props.history.location.state;\r\n    data.containerList.map((c) => {\r\n      if (c.container_number == address.ctnNumber) {\r\n        c.consigneeContactName = address.consigneeContactName;\r\n        c.addressLine1 = address.addressLine1;\r\n        c.phoneNumber = address.phoneNumber;\r\n        c.consigneeContactNumber = address.consigneeContactNumber;\r\n      }\r\n    });\r\n    var cont = data.containerList;\r\n    var request = {\r\n      consigneeContactNumber: address.consigneeContactNumber,\r\n      phoneNumber: address.phoneNumber,\r\n      addressLine1: address.addressLine1,\r\n      consigneeContactName: address.consigneeContactName,\r\n      container_number: address.ctnNumber,\r\n      dpwTransactionId: address.dpwTransactionId,\r\n      requestDetailsNumber: address.requestDetailsNumber,\r\n    };\r\n    let response = await httpPostCallWithoutHeaderAndWithBody(\r\n      EndPointURL.contacDetailsUpdateUrl,\r\n      request\r\n    );\r\n    if (await response.success) {\r\n      console.log(\"bookingData\", data.booking);\r\n      let booking = {\r\n        // booking: data.booking?.booking,\r\n        // bookingNumber : data.booking.bookingNumber,\r\n        bookingDetails : data.bookingDetails,\r\n        containers: cont,\r\n        userType: data.booking?.userType,\r\n        // status: data.booking?.status,\r\n        status: data.booking?.cardStatus,\r\n      };\r\n      history.push(\"/containerDetails\", booking);\r\n    }\r\n  };\r\n\r\n  function updateAddress() {\r\n    let newAddress = address;\r\n    var response = httpPostCallWithoutHeaderAndWithBody(\r\n      EndPointURL.updateAddress,\r\n      newAddress\r\n    );\r\n    response.then((result) => {\r\n      if (result.success) {\r\n        var address = reduxActions.updateAddress(newAddress);\r\n        if (address) Store.dispatch(address);\r\n        props.history.goBack();\r\n      }\r\n    });\r\n  }\r\n\r\n  function saveAddress() {\r\n    let newAddress = address;\r\n    var response = httpPostCallWithoutHeaderAndWithBody(\r\n      EndPointURL.addAddress,\r\n      newAddress\r\n    );\r\n    response.then((result) => {\r\n      if (result.success) {\r\n        var address = reduxActions.addAddress(newAddress);\r\n        if (address) Store.dispatch(address);\r\n        props.history.goBack();\r\n      }\r\n    });\r\n  }\r\n\r\n  function handleAddress(e: any) {\r\n    console.log(\"loc\", JSON.stringify(e.loc));\r\n    setAddress({\r\n      ...address,\r\n      dropAddress: e.add,\r\n      latLng: JSON.stringify(e.loc),\r\n    });\r\n    setError({\r\n      ...error,\r\n      errorDropAddr: \"\",\r\n    });\r\n  }\r\n\r\n  const mapViewProps = {\r\n    getAddressFromMap: handleAddress,\r\n    zone: address.dropZone,\r\n    latLng: address.latLng ? JSON.parse(address.latLng) : address.latLng,\r\n    selectedAdd: address.dropAddress,\r\n    isContainerEdit: props.history.location.state?.isContainerEdit,\r\n    handleError: (e) => {\r\n      setError({\r\n        ...error,\r\n        mapError: e,\r\n      });\r\n    },\r\n  };\r\n\r\n  return (\r\n    <IonPage>\r\n      <Header\r\n        label={address.createMode ? \"Add address\" : \"Edit Address\"}\r\n        action=\"check\"\r\n        checkClick={() => {\r\n          addOrUpdate();\r\n        }}\r\n      />\r\n      <IonCard className=\"mapCard\">\r\n        <MapView mapViewProps={mapViewProps} />\r\n      </IonCard>\r\n      <IonLabel className=\"redColor\" hidden={error.mapError == \"\"}>\r\n        {error.mapError}\r\n        <IonIcon\r\n          icon={closeOutline}\r\n          slot=\"icon-only\"\r\n          className=\"closeIconMap\"\r\n          onClick={() => {\r\n            setError({\r\n              ...error,\r\n              mapError: \"\",\r\n            });\r\n          }}\r\n        />\r\n      </IonLabel>\r\n      <IonLabel className=\"redColor\" hidden={errorMessage == \"\"}>\r\n        {errorMessage}\r\n      </IonLabel>\r\n      <IonCard className=\"scrollCard\">\r\n        <DropDownInput\r\n          name={\"dropZone\"}\r\n          value={address.dropZone}\r\n          label=\"Zone\"\r\n          errors={error.errorDropZone}\r\n          type=\"text\"\r\n          required={true}\r\n          onChange={getZone}\r\n          datatype=\"TEXT\"\r\n          placeholder=\"Zone\"\r\n          listValues={allZones}\r\n          selectedName={address.selectedDropZoneLabel}\r\n          disabled={props.history.location.state?.isContainerEdit}\r\n        />\r\n        <TxtInput\r\n          name={\"dropAddress\"}\r\n          value={address.dropAddress}\r\n          label=\"Drop Address\"\r\n          errors={error.errorDropAddr}\r\n          type=\"text\"\r\n          required={true}\r\n          readonly={true}\r\n          datatype=\"TEXT\"\r\n          placeholder=\"Select Location\"\r\n        />\r\n        <TxtInput\r\n          name={\"addressLine1\"}\r\n          value={address.addressLine1}\r\n          label=\"Addresss Line 1\"\r\n          errors={error.errorAddrLine}\r\n          type=\"text\"\r\n          required={true}\r\n          readonly={props.history.location.state?.isContainerEdit}\r\n          onChange={handleLandMark}\r\n          datatype=\"TEXT\"\r\n          placeholder=\"Addresss Line 1\"\r\n        />\r\n        {!props.history.location.state?.isContainerEdit && (\r\n          <TxtInput\r\n            name={\"nickName\"}\r\n            value={address.addressNickname}\r\n            label=\"Nick Name\"\r\n            errors={error.errorNickName}\r\n            type=\"text\"\r\n            required={true}\r\n            onChange={handleAddressNickName}\r\n            datatype=\"TEXT\"\r\n            placeholder=\"Nick Name\"\r\n          />\r\n        )}\r\n        <TxtInput\r\n          name={\"contactName\"}\r\n          value={address.consigneeContactName}\r\n          label=\"Contact Person\"\r\n          errors={error.errorName}\r\n          type=\"text\"\r\n          required={true}\r\n          onChange={handleContactName}\r\n          datatype=\"TEXT\"\r\n          placeholder=\"Contact Person\"\r\n        />\r\n        <TxtInput\r\n          name={\"mobileNumber\"}\r\n          value={\r\n            address?.consigneeContactNumber?.split(\"971\")[1]\r\n              ? address?.consigneeContactNumber?.split(\"971\")[1]\r\n              : address.consigneeContactNumber\r\n          }\r\n          label=\"Mobile Number\"\r\n          errors={error.errorMobile}\r\n          type=\"tel\"\r\n          required={true}\r\n          onChange={handleMobileNumber}\r\n          datatype=\"TEXT\"\r\n          placeholder=\"Mobile Number\"\r\n          max={9}\r\n        />\r\n\r\n        <TxtInput\r\n          name={\"phoneNumber\"}\r\n          value={\r\n            address.phoneNumber?.split(\"971\")[1]\r\n              ? address?.phoneNumber?.split(\"971\")[1]\r\n              : address.phoneNumber\r\n          }\r\n          label=\"Phone Number\"\r\n          errors={error.errorPhone}\r\n          type=\"tel\"\r\n          required={true}\r\n          onChange={handlePhoneNumber}\r\n          datatype=\"TEXT\"\r\n          placeholder=\"Phone Number\"\r\n          max={8}\r\n        />\r\n      </IonCard>\r\n    </IonPage>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}