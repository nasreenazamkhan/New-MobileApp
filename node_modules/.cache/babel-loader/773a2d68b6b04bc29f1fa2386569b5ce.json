{"ast":null,"code":"import{IonContent,IonPage}from\"@ionic/react\";import React,{useEffect,useState}from\"react\";import Header from\"../../components/Header\";import CenterPopup from\"../../components/PopUp/CenterPopup/CenterPopup\";import SlideUpModal from\"../../components/PopUp/SlideUpModal\";import Star from\"../../components/Star/Star\";import InformationText from\"../../components/Texts/InformationText\";import TopMenu from\"../../components/topMenu/TopMenu\";import{fetchPods,getdetailsOfBookingNumber,postApprovePod,postRejectPod,reviewSubmit}from\"../../services/EndPointApi\";import DeclarationDetails from\"../ContainerCart/DeclarationDetails\";import\"./Pod.scss\";import ListDownload from\"./PODCard/ListDownload\";import PodCard from\"./PODCard/PodCard\";var draftIconProps={name:\"drafts-note\",slot:\"\",class:\"zoom12\",style:{stroke:\"#168FE4\"}};export default function PODDetails(props){var _response$containerLi,_response$containerLi2;var trackTruckIconProps={name:\"track-truck\",slot:\"\",class:\"zoom12\",style:{stroke:\"#168FE4\"},styleProps:{zoom:2.6}};var editContactIconProps={name:\"edit-contact\",slot:\"\",class:\"zoom12\",style:{stroke:\"#168FE4\"},styleProps:{zoom:2.6}};var downloadIconProps={name:\"invoices-download\",slot:\"\",class:\"zoom12\",style:{stroke:\"#168FE4\"},styleProps:{zoom:1.6}};var allBookingRelated=props.history.location.state;const[showSlideUpModal,setshowSlideUpModal]=useState(false);const[downloadList,setdownloadList]=useState([]);var downloadPodPopupContent={content:/*#__PURE__*/React.createElement(ListDownload,{downloadableListItem:downloadList}),okButton:\"APPROVE\",cancelButton:\"REJECT\",textAreaComment:\"Importer comments (if any)\",isClose:true,type:\"podDownload\"};const[showModal,setshowModal]=useState(false);const[podDownLoadModalContent,setpodDownLoadModalContent]=useState(downloadPodPopupContent);const[response,setresponse]=useState([]);const[selectedIndexNumber,setselectedIndexNumber]=useState({});const[ratingObj,setratingObj]=useState({container_number:\"\",BookingReferenceNumber:\"\",feedback:\"\",rating:0});useEffect(()=>{bookingDetails();},[]);// useEffect(() => {\n//   setshowModal(true);\n// }, [downloadList]);\nasync function bookingDetails(){let resp=await getdetailsOfBookingNumber(props.location.state.bookingNumber);if(resp===null||resp===void 0?void 0:resp.success){setresponse(resp===null||resp===void 0?void 0:resp.data);}}function podCardClick(item){console.log(item);setshowSlideUpModal(true);setselectedIndexNumber(item);}async function centerPopupModalOkClick(data,type){setshowModal(false);setpodDownLoadModalContent(downloadPodPopupContent);if(type===\"podDownload\"){var podApproveObj={...selectedIndexNumber,...downloadList};if(data===\"approve\"){let podApproveResp=await postApprovePod(selectedIndexNumber);if(podApproveResp.success){setpodDownLoadModalContent({content:/*#__PURE__*/React.createElement(Star,{starValue:val=>setratingObj({...ratingObj,rating:val})}),okButton:\"Submit\",//cancelButton: \"REJECT\",\ntextAreaComment:\"Importer comments (if any)\",isClose:false,textAreaHeading:\"Add suggestions\",mainHead:\"Would you like to rate the transporter service?\",type:\"rating\"});setshowModal(true);}}else if(data===\"reject\"){let podRejectResp=await postRejectPod(selectedIndexNumber);console.log(\"rejeccttteeeddd\",podRejectResp);if(podRejectResp.success){bookingDetails();}}}else if(type===\"rating\"){console.log(\"8888888\",ratingObj);submitReview();setpodDownLoadModalContent(downloadPodPopupContent);}}async function submitReview(){var data={container_number:selectedIndexNumber.container_number,BookingReferenceNumber:\"\",feedback:\"\",rating:0};setratingObj({...ratingObj,container_number:selectedIndexNumber.container_number});console.log(\"((**&&^^\",selectedIndexNumber);let resp=await reviewSubmit(ratingObj);}async function openDownloadCenterpopup(status,item){setselectedIndexNumber(item);var obj={referenceNumber:props.location.state.bookingNumber,containerNumber:item.container_number};let resp=await fetchPods(obj);if(resp.success){console.log(\"99999\",resp===null||resp===void 0?void 0:resp.data.data.dataItems);if((resp===null||resp===void 0?void 0:resp.data.data.dataItems.length)>0){setdownloadList(resp===null||resp===void 0?void 0:resp.data.data.dataItems);setpodDownLoadModalContent({content:/*#__PURE__*/React.createElement(ListDownload,{downloadableListItem:resp===null||resp===void 0?void 0:resp.data.data.dataItems}),okButton:\"APPROVE\",cancelButton:\"REJECT\",textAreaComment:\"Importer comments (if any)\",isClose:true,type:\"podDownload\"});setshowModal(true);// }, 100);\n}}}var topMenuItems=[{name:\"\",src:\"filter\",styleProps:{zoom:1.3},type:\"button\",slot:\"start\",clickedOnTopMenu:()=>console.log(\"clicked1\")},{name:\"Storage Validity\",src:\"filter-down-arrow\",type:\"button\",slot:\"start\",size:\"0.7rem\",clickedOnTopMenu:()=>console.log(\"clicked4\")}];return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(Header,{label:\"Verify POD \",action:\"home\"//searchClick={onSearchClick}\n,agentHeader:true}),/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(SlideUpModal,{showModal:showSlideUpModal,openOrCloseModal:modalState=>{setshowSlideUpModal(modalState);setpodDownLoadModalContent(downloadPodPopupContent);},content:/*#__PURE__*/React.createElement(DeclarationDetails,{item:selectedIndexNumber,click:()=>{setshowModal(false);},fromPod:true})}),\" \",/*#__PURE__*/React.createElement(CenterPopup,{showModal:showModal,content:podDownLoadModalContent.content,openOrCloseModal:(data,type)=>centerPopupModalOkClick(data,type),okButton:podDownLoadModalContent.okButton,cancelButton:podDownLoadModalContent.cancelButton,textAreaComment:podDownLoadModalContent.textAreaComment,isClose:podDownLoadModalContent.isClose,textAreaHeading:podDownLoadModalContent.textAreaHeading,mainHead:podDownLoadModalContent.mainHead,type:podDownLoadModalContent.type,getTextArea:val=>setratingObj({...ratingObj,feedback:val})}),/*#__PURE__*/React.createElement(TopMenu,{topMenuProps:topMenuItems}),/*#__PURE__*/React.createElement(InformationText,{message:\"\".concat((response===null||response===void 0?void 0:(_response$containerLi=response.containerList)===null||_response$containerLi===void 0?void 0:_response$containerLi.length)||0,\" containers\")}),/*#__PURE__*/React.createElement(\"div\",null,response===null||response===void 0?void 0:(_response$containerLi2=response.containerList)===null||_response$containerLi2===void 0?void 0:_response$containerLi2.map((item,index)=>/*#__PURE__*/React.createElement(PodCard,{key:index,item:item,cardClick:podCardClick,clickedDownloadPOD:openDownloadCenterpopup,expiryDate:allBookingRelated===null||allBookingRelated===void 0?void 0:allBookingRelated.verifyPodBy,verifyPodTime:allBookingRelated===null||allBookingRelated===void 0?void 0:allBookingRelated.verifyPodTime,icon1:trackTruckIconProps,icon2:editContactIconProps,icon3:downloadIconProps})))));}","map":{"version":3,"sources":["D:/DT/ptmsCheckOutNew/New-MobileApp/src/pages/VerifyPOD/PODDetails.tsx"],"names":["IonContent","IonPage","React","useEffect","useState","Header","CenterPopup","SlideUpModal","Star","InformationText","TopMenu","fetchPods","getdetailsOfBookingNumber","postApprovePod","postRejectPod","reviewSubmit","DeclarationDetails","ListDownload","PodCard","draftIconProps","name","slot","class","style","stroke","PODDetails","props","trackTruckIconProps","styleProps","zoom","editContactIconProps","downloadIconProps","allBookingRelated","history","location","state","showSlideUpModal","setshowSlideUpModal","downloadList","setdownloadList","downloadPodPopupContent","content","okButton","cancelButton","textAreaComment","isClose","type","showModal","setshowModal","podDownLoadModalContent","setpodDownLoadModalContent","response","setresponse","selectedIndexNumber","setselectedIndexNumber","ratingObj","setratingObj","container_number","BookingReferenceNumber","feedback","rating","bookingDetails","resp","bookingNumber","success","data","podCardClick","item","console","log","centerPopupModalOkClick","podApproveObj","podApproveResp","val","textAreaHeading","mainHead","podRejectResp","submitReview","openDownloadCenterpopup","status","obj","referenceNumber","containerNumber","dataItems","length","topMenuItems","src","clickedOnTopMenu","size","modalState","containerList","map","index","verifyPodBy","verifyPodTime"],"mappings":"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","sourcesContent":["import {\r\n  IonCard,\r\n  IonCardContent,\r\n  IonContent,\r\n  IonLabel,\r\n  IonPage,\r\n  IonRow,\r\n} from \"@ionic/react\";\r\nimport { chevronDownOutline } from \"ionicons/icons\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport Header from \"../../components/Header\";\r\nimport Icon from \"../../components/Icon\";\r\nimport CenterPopup from \"../../components/PopUp/CenterPopup/CenterPopup\";\r\nimport SlideUpModal from \"../../components/PopUp/SlideUpModal\";\r\nimport Star from \"../../components/Star/Star\";\r\nimport InformationText from \"../../components/Texts/InformationText\";\r\nimport TopMenu from \"../../components/topMenu/TopMenu\";\r\nimport {\r\n  fetchPods,\r\n  getdetailsOfBookingNumber,\r\n  postApprovePod,\r\n  postRejectPod,\r\n  reviewSubmit,\r\n} from \"../../services/EndPointApi\";\r\nimport DeclarationDetails from \"../ContainerCart/DeclarationDetails\";\r\nimport \"./Pod.scss\";\r\nimport ListDownload from \"./PODCard/ListDownload\";\r\nimport PodCard from \"./PODCard/PodCard\";\r\nimport SLAExpire from \"./SLAExpire\";\r\n\r\nvar draftIconProps = {\r\n  name: \"drafts-note\",\r\n  slot: \"\",\r\n  class: \"zoom12\",\r\n  style: { stroke: \"#168FE4\" },\r\n};\r\n\r\nexport default function PODDetails(props) {\r\n  var trackTruckIconProps = {\r\n    name: \"track-truck\",\r\n    slot: \"\",\r\n    class: \"zoom12\",\r\n    style: { stroke: \"#168FE4\" },\r\n    styleProps: { zoom: 2.6 },\r\n  };\r\n\r\n  var editContactIconProps = {\r\n    name: \"edit-contact\",\r\n    slot: \"\",\r\n    class: \"zoom12\",\r\n    style: { stroke: \"#168FE4\" },\r\n    styleProps: { zoom: 2.6 },\r\n  };\r\n\r\n  var downloadIconProps = {\r\n    name: \"invoices-download\",\r\n    slot: \"\",\r\n    class: \"zoom12\",\r\n    style: { stroke: \"#168FE4\" },\r\n    styleProps: { zoom: 1.6 },\r\n  };\r\n  var allBookingRelated = props.history.location.state;\r\n  const [showSlideUpModal, setshowSlideUpModal] = useState(false);\r\n  const [downloadList, setdownloadList] = useState<any>([]);\r\n  var downloadPodPopupContent = {\r\n    content: <ListDownload downloadableListItem={downloadList} />,\r\n    okButton: \"APPROVE\",\r\n    cancelButton: \"REJECT\",\r\n    textAreaComment: \"Importer comments (if any)\",\r\n    isClose: true,\r\n    type: \"podDownload\",\r\n  };\r\n  const [showModal, setshowModal] = useState(false);\r\n  const [podDownLoadModalContent, setpodDownLoadModalContent] = useState<any>(\r\n    downloadPodPopupContent\r\n  );\r\n  const [response, setresponse] = useState<any>([]);\r\n  const [selectedIndexNumber, setselectedIndexNumber] = useState<any>({});\r\n  const [ratingObj, setratingObj] = useState<any>({\r\n    container_number: \"\",\r\n    BookingReferenceNumber: \"\",\r\n    feedback: \"\",\r\n    rating: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    bookingDetails();\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   setshowModal(true);\r\n  // }, [downloadList]);\r\n\r\n  async function bookingDetails() {\r\n    let resp = await getdetailsOfBookingNumber(\r\n      props.location.state.bookingNumber\r\n    );\r\n    if (resp?.success) {\r\n      setresponse(resp?.data);\r\n    }\r\n  }\r\n  function podCardClick(item) {\r\n    console.log(item);\r\n    setshowSlideUpModal(true);\r\n    setselectedIndexNumber(item);\r\n  }\r\n\r\n  async function centerPopupModalOkClick(data, type) {\r\n    setshowModal(false);\r\n    setpodDownLoadModalContent(downloadPodPopupContent);\r\n    if (type === \"podDownload\") {\r\n      var podApproveObj = { ...selectedIndexNumber, ...downloadList };\r\n      if (data === \"approve\") {\r\n        let podApproveResp = await postApprovePod(selectedIndexNumber);\r\n        if (podApproveResp.success) {\r\n          setpodDownLoadModalContent({\r\n            content: (\r\n              <Star\r\n                starValue={(val) => setratingObj({ ...ratingObj, rating: val })}\r\n              />\r\n            ),\r\n            okButton: \"Submit\",\r\n            //cancelButton: \"REJECT\",\r\n            textAreaComment: \"Importer comments (if any)\",\r\n            isClose: false,\r\n            textAreaHeading: \"Add suggestions\",\r\n            mainHead: \"Would you like to rate the transporter service?\",\r\n            type: \"rating\",\r\n          });\r\n          setshowModal(true);\r\n        }\r\n      } else if (data === \"reject\") {\r\n        let podRejectResp = await postRejectPod(selectedIndexNumber);\r\n        console.log(\"rejeccttteeeddd\", podRejectResp);\r\n        if (podRejectResp.success) {\r\n          bookingDetails();\r\n        }\r\n      }\r\n    } else if (type === \"rating\") {\r\n      console.log(\"8888888\", ratingObj);\r\n      submitReview();\r\n      setpodDownLoadModalContent(downloadPodPopupContent);\r\n    }\r\n  }\r\n\r\n  async function submitReview() {\r\n    var data = {\r\n      container_number: selectedIndexNumber.container_number,\r\n      BookingReferenceNumber: \"\",\r\n      feedback: \"\",\r\n      rating: 0,\r\n    };\r\n    setratingObj({\r\n      ...ratingObj,\r\n      container_number: selectedIndexNumber.container_number,\r\n    });\r\n    console.log(\"((**&&^^\", selectedIndexNumber);\r\n    let resp = await reviewSubmit(ratingObj);\r\n  }\r\n\r\n  async function openDownloadCenterpopup(status, item) {\r\n    setselectedIndexNumber(item);\r\n    var obj = {\r\n      referenceNumber: props.location.state.bookingNumber,\r\n      containerNumber: item.container_number,\r\n    };\r\n    let resp = await fetchPods(obj);\r\n    if (resp.success) {\r\n      console.log(\"99999\", resp?.data.data.dataItems);\r\n      if (resp?.data.data.dataItems.length > 0) {\r\n        setdownloadList(resp?.data.data.dataItems);\r\n        setpodDownLoadModalContent({\r\n          content: (\r\n            <ListDownload downloadableListItem={resp?.data.data.dataItems} />\r\n          ),\r\n          okButton: \"APPROVE\",\r\n          cancelButton: \"REJECT\",\r\n          textAreaComment: \"Importer comments (if any)\",\r\n          isClose: true,\r\n          type: \"podDownload\",\r\n        });\r\n        setshowModal(true);\r\n        // }, 100);\r\n      }\r\n    }\r\n  }\r\n\r\n  var topMenuItems = [\r\n    {\r\n      name: \"\",\r\n      src: \"filter\",\r\n      styleProps: { zoom: 1.3 },\r\n      type: \"button\",\r\n      slot: \"start\",\r\n      clickedOnTopMenu: () => console.log(\"clicked1\"),\r\n    },\r\n\r\n    {\r\n      name: \"Storage Validity\",\r\n      src: \"filter-down-arrow\",\r\n      type: \"button\",\r\n      slot: \"start\",\r\n      size: \"0.7rem\",\r\n      clickedOnTopMenu: () => console.log(\"clicked4\"),\r\n    },\r\n  ];\r\n  return (\r\n    <IonPage>\r\n      <Header\r\n        label=\"Verify POD \"\r\n        action=\"home\"\r\n        //searchClick={onSearchClick}\r\n        agentHeader={true}\r\n      />\r\n      <IonContent>\r\n        <SlideUpModal\r\n          showModal={showSlideUpModal}\r\n          openOrCloseModal={(modalState) => {\r\n            setshowSlideUpModal(modalState);\r\n            setpodDownLoadModalContent(downloadPodPopupContent);\r\n          }}\r\n          content={\r\n            <DeclarationDetails\r\n              item={selectedIndexNumber}\r\n              click={() => {\r\n                setshowModal(false);\r\n              }}\r\n              fromPod={true}\r\n            />\r\n          }\r\n        />{\" \"}\r\n        <CenterPopup\r\n          showModal={showModal}\r\n          content={podDownLoadModalContent.content}\r\n          openOrCloseModal={(data, type) => centerPopupModalOkClick(data, type)}\r\n          okButton={podDownLoadModalContent.okButton}\r\n          cancelButton={podDownLoadModalContent.cancelButton}\r\n          textAreaComment={podDownLoadModalContent.textAreaComment}\r\n          isClose={podDownLoadModalContent.isClose}\r\n          textAreaHeading={podDownLoadModalContent.textAreaHeading}\r\n          mainHead={podDownLoadModalContent.mainHead}\r\n          type={podDownLoadModalContent.type}\r\n          getTextArea={(val) => setratingObj({ ...ratingObj, feedback: val })}\r\n        />\r\n        <TopMenu topMenuProps={topMenuItems} />\r\n        <InformationText\r\n          message={`${response?.containerList?.length || 0} containers`}\r\n        />\r\n        {/* <div className=\"sub-content\">\r\n          <div className=\"booking-num\">\r\n            <Icon iconProps={draftIconProps} />\r\n            <IonLabel className=\"booking-label\">\r\n              {props.location.state.bookingNumber}\r\n            </IonLabel>\r\n          </div>\r\n        </div> */}\r\n        <div>\r\n          {response?.containerList?.map((item, index) => (\r\n            <PodCard\r\n              key={index}\r\n              item={item}\r\n              cardClick={podCardClick}\r\n              clickedDownloadPOD={openDownloadCenterpopup}\r\n              expiryDate={allBookingRelated?.verifyPodBy}\r\n              verifyPodTime={allBookingRelated?.verifyPodTime}\r\n              icon1={trackTruckIconProps}\r\n              icon2={editContactIconProps}\r\n              icon3={downloadIconProps}\r\n            />\r\n          ))}\r\n        </div>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}