{"ast":null,"code":"import{Capacitor}from\"@capacitor/core\";import{IonContent,IonIcon,IonPage,IonRow}from\"@ionic/react\";import{bookOutline,closeOutline,helpCircleOutline,personOutline,powerOutline,settingsOutline}from\"ionicons/icons\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router\";import Alert from\"../../components/alert/Alert\";import InappBrowser from\"../../components/InappBrowser\";import*as LoginUser from\"../../redux/actionTypes/AllActionTypes\";import Store from\"../../redux/Store\";//import { Logout } from \"../../services/Common\";\nimport{getDraftCount}from\"../../services/EndPointApi\";import{termsAndConditionUrl,helpAndSupportUrl}from\"../../util/Constants\";import\"./ProfileMenu.scss\";const ProfileMenu=props=>{let history=useHistory();const[draftCount,setdraftCount]=useState(0);const[alertPopup,setAlertPopup]=useState(false);useEffect(()=>{getAllSavedDraftsCount();},[]);const handleDraftPopup=(item,actionType)=>{if(actionType){setAlertPopup(false);//history.push(\"/savedDrafts\");\n}else{setAlertPopup(false);}};const alertProps={isShow:alertPopup,message:\" \",//message,\ncontent:\"Attention!\",//icon: \"<img src='/assets/icon/are-you-sure.svg'/>\",\nalertAction:clickedLogout,//handleHeaderClick,\nitemName:\" Are you sure you want to logout?\",cancelPolicy:true,okButtonName:\"Continue\",cancelButtonName:\"Cancel\"};async function getAllSavedDraftsCount(){let resp=await getDraftCount();if(resp===null||resp===void 0?void 0:resp.success)setdraftCount(resp===null||resp===void 0?void 0:resp.data);//setdraftCount(resp);\nconsole.log(resp);}const closeThis=()=>{console.log(props);props.history.goBack();};function clickedLogout(item,actionType){setAlertPopup(false);if(actionType){Store.dispatch(async dispatch=>{dispatch({type:LoginUser.REMOVE_ACCESS_TOKEN});dispatch({type:LoginUser.REMOVE_USER});});history.push(\"/login\");if(Capacitor.isNative){//Plugins.App.exitApp();\nhistory.push(\"/login\");}}else{}}return/*#__PURE__*/React.createElement(IonPage,{className:\"profile-page\"},/*#__PURE__*/React.createElement(IonContent,{className:\"profile-menu-content\"},/*#__PURE__*/React.createElement(Alert,{alertProps:alertProps}),/*#__PURE__*/React.createElement(\"div\",{className:\"dt-icon\"},/*#__PURE__*/React.createElement(\"img\",{className:\"icon-logo\",src:\"assets/img/dubai_trade_logo.png\",alt:\"Ionic logo\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"close-icon\"},/*#__PURE__*/React.createElement(IonIcon,{onClick:e=>closeThis(),icon:closeOutline})),/*#__PURE__*/React.createElement(\"div\",{className:\"menu-links\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(IonRow,{className:\"center-align\",onClick:e=>history.push(\"/tabs/profile\")},/*#__PURE__*/React.createElement(IonIcon,{icon:personOutline}),\" My Profile\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(IonRow,{className:\"center-align\",onClick:()=>props.history.push(\"/savedDrafts\")},/*#__PURE__*/React.createElement(IonIcon,{icon:bookOutline}),\" save drafts\",\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"drafts-count-circle\"},draftCount))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(IonIcon,{icon:settingsOutline}),\"Settings\"),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(IonRow,{className:\"center-align\",onClick:()=>InappBrowser(helpAndSupportUrl)},/*#__PURE__*/React.createElement(IonIcon,{icon:helpCircleOutline}),\"Help & Support\",\" \")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(IonRow,{className:\"center-align\",onClick:()=>setAlertPopup(true)},/*#__PURE__*/React.createElement(IonIcon,{icon:powerOutline}),\"Logout\")))),/*#__PURE__*/React.createElement(\"div\",{onClick:()=>InappBrowser(termsAndConditionUrl),className:\"tnc\"},\"Privacy policy - Terms and Conditions.\")));};export default ProfileMenu;","map":{"version":3,"sources":["D:/DT/ptmsCheckOutNew/New-MobileApp/src/pages/profilemenu/ProfileMenu.tsx"],"names":["Capacitor","IonContent","IonIcon","IonPage","IonRow","bookOutline","closeOutline","helpCircleOutline","personOutline","powerOutline","settingsOutline","React","useEffect","useState","useHistory","Alert","InappBrowser","LoginUser","Store","getDraftCount","termsAndConditionUrl","helpAndSupportUrl","ProfileMenu","props","history","draftCount","setdraftCount","alertPopup","setAlertPopup","getAllSavedDraftsCount","handleDraftPopup","item","actionType","alertProps","isShow","message","content","alertAction","clickedLogout","itemName","cancelPolicy","okButtonName","cancelButtonName","resp","success","data","console","log","closeThis","goBack","dispatch","type","REMOVE_ACCESS_TOKEN","REMOVE_USER","push","isNative","e"],"mappings":"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","sourcesContent":["import { Capacitor } from \"@capacitor/core\";\r\nimport { IonButton, IonContent, IonIcon, IonPage, IonRow } from \"@ionic/react\";\r\nimport {\r\n  bookOutline,\r\n  closeOutline,\r\n  helpCircleOutline,\r\n  personOutline,\r\n  powerOutline,\r\n  settingsOutline,\r\n} from \"ionicons/icons\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { RouteComponentProps, useHistory } from \"react-router\";\r\nimport Alert from \"../../components/alert/Alert\";\r\nimport InappBrowser from \"../../components/InappBrowser\";\r\nimport * as LoginUser from \"../../redux/actionTypes/AllActionTypes\";\r\nimport Store from \"../../redux/Store\";\r\n//import { Logout } from \"../../services/Common\";\r\nimport { getDraftCount } from \"../../services/EndPointApi\";\r\nimport { termsAndConditionUrl, helpAndSupportUrl } from \"../../util/Constants\";\r\n\r\nimport \"./ProfileMenu.scss\";\r\ninterface ProfileProps extends RouteComponentProps {}\r\n\r\nconst ProfileMenu: React.FC<ProfileProps> = (props) => {\r\n  let history = useHistory();\r\n  const [draftCount, setdraftCount] = useState(0);\r\n  const [alertPopup, setAlertPopup] = useState(false);\r\n  useEffect(() => {\r\n    getAllSavedDraftsCount();\r\n  }, []);\r\n\r\n  const handleDraftPopup = (item, actionType) => {\r\n    if (actionType) {\r\n      setAlertPopup(false);\r\n      //history.push(\"/savedDrafts\");\r\n    } else {\r\n      setAlertPopup(false);\r\n    }\r\n  };\r\n  const alertProps = {\r\n    isShow: alertPopup,\r\n    message: \" \", //message,\r\n    content: \"Attention!\",\r\n    //icon: \"<img src='/assets/icon/are-you-sure.svg'/>\",\r\n    alertAction: clickedLogout, //handleHeaderClick,\r\n\r\n    itemName: \" Are you sure you want to logout?\",\r\n    cancelPolicy: true,\r\n    okButtonName: \"Continue\",\r\n    cancelButtonName: \"Cancel\",\r\n  };\r\n\r\n  async function getAllSavedDraftsCount() {\r\n    let resp = await getDraftCount();\r\n    if (resp?.success) setdraftCount(resp?.data);\r\n    //setdraftCount(resp);\r\n    console.log(resp);\r\n  }\r\n  const closeThis = () => {\r\n    console.log(props);\r\n    props.history.goBack();\r\n  };\r\n\r\n  function clickedLogout(item, actionType) {\r\n    setAlertPopup(false);\r\n    if (actionType) {\r\n      Store.dispatch(async (dispatch) => {\r\n        dispatch({\r\n          type: LoginUser.REMOVE_ACCESS_TOKEN,\r\n        });\r\n        dispatch({\r\n          type: LoginUser.REMOVE_USER,\r\n        });\r\n      });\r\n      history.push(\"/login\");\r\n      if (Capacitor.isNative) {\r\n        //Plugins.App.exitApp();\r\n        history.push(\"/login\");\r\n      }\r\n    } else {\r\n    }\r\n  }\r\n  return (\r\n    <IonPage className=\"profile-page\">\r\n      <IonContent className=\"profile-menu-content\">\r\n        <Alert alertProps={alertProps} />\r\n        <div className=\"dt-icon\">\r\n          <img\r\n            className=\"icon-logo\"\r\n            src=\"assets/img/dubai_trade_logo.png\"\r\n            alt=\"Ionic logo\"\r\n          />\r\n        </div>\r\n        <div className=\"close-icon\">\r\n          <IonIcon onClick={(e) => closeThis()} icon={closeOutline}></IonIcon>\r\n        </div>\r\n        <div className=\"menu-links\">\r\n          <ul>\r\n            <li>\r\n              <IonRow\r\n                className=\"center-align\"\r\n                onClick={(e) => history.push(\"/tabs/profile\")}\r\n              >\r\n                <IonIcon icon={personOutline}></IonIcon> My Profile\r\n              </IonRow>\r\n            </li>\r\n            <li>\r\n              <IonRow\r\n                className=\"center-align\"\r\n                onClick={() => props.history.push(\"/savedDrafts\")}\r\n              >\r\n                <IonIcon icon={bookOutline}></IonIcon> save drafts{\" \"}\r\n                <div className=\"drafts-count-circle\">{draftCount}</div>\r\n              </IonRow>\r\n            </li>\r\n            <li>\r\n              <IonIcon icon={settingsOutline}></IonIcon>\r\n              Settings\r\n            </li>\r\n            <li>\r\n              <IonRow\r\n                className=\"center-align\"\r\n                onClick={() => InappBrowser(helpAndSupportUrl)}\r\n              >\r\n                <IonIcon icon={helpCircleOutline}></IonIcon>\r\n                Help & Support{\" \"}\r\n              </IonRow>\r\n            </li>\r\n            <li>\r\n              <IonRow\r\n                className=\"center-align\"\r\n                onClick={() => setAlertPopup(true)}\r\n              >\r\n                <IonIcon icon={powerOutline}></IonIcon>\r\n                Logout\r\n              </IonRow>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div onClick={() => InappBrowser(termsAndConditionUrl)} className=\"tnc\">\r\n          Privacy policy - Terms and Conditions.\r\n        </div>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default ProfileMenu;\r\n"]},"metadata":{},"sourceType":"module"}