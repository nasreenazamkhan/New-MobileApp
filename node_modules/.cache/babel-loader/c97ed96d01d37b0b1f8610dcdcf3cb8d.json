{"ast":null,"code":"import{IonCol,IonContent,IonLabel,IonPage,IonRow}from\"@ionic/react\";import React,{useEffect,useState}from\"react\";import{useHistory}from\"react-router-dom\";import BlueFooter from\"../../../../components/Footer/BlueFooter\";import Footer from\"../../../../components/Footer/Footer\";import{updatePaymentStatus}from\"../../../../redux/actions/AllActions\";import Store from\"../../../../redux/Store\";import{getInvoiceDetails,payManualInvoice}from\"../../../../services/EndPointApi\";import{postToExternalSite}from\"../../../../services/PaymentService\";import CenterFooterButton from\"../../../CenterFooterButton\";import Fail from\"../../../PaymentStatus/Fail\";import Pending from\"../../../PaymentStatus/Pending\";import Success from\"../../../PaymentStatus/Success\";import InvoiceCard from\"../InvoiceCard\";const ManualInvoice=_ref=>{var _invoiceList$invoiceL;let{InvoiceDetails}=_ref;let history=useHistory();const[invoiceList,setinvoiceList]=useState({});const[screen,setscreen]=useState({});useEffect(()=>{getAllInvoice();},[]);async function getAllInvoice(){var paymentStatus={status:\"\",reference_num:\"0\"};var paymentSta=updatePaymentStatus(paymentStatus);if(paymentSta)Store.dispatch(paymentSta);var resp=await getInvoiceDetails(InvoiceDetails.bookingNumber);if(resp===null||resp===void 0?void 0:resp.success){setinvoiceList(resp.data.data.dataItems[0]);}}Store.subscribe(()=>{setscreen(Store.getState().VariableValues.paymentStatus);});async function payAmount(){var resp=await payManualInvoice(invoiceList);if(resp===null||resp===void 0?void 0:resp.success){var _resp$data,_resp$data$data,_resp$data$data$dataI,_resp$data2,_resp$data2$data,_resp$data2$data$data;postToExternalSite(resp===null||resp===void 0?void 0:(_resp$data=resp.data)===null||_resp$data===void 0?void 0:(_resp$data$data=_resp$data.data)===null||_resp$data$data===void 0?void 0:(_resp$data$data$dataI=_resp$data$data.dataItems[0])===null||_resp$data$data$dataI===void 0?void 0:_resp$data$data$dataI.url,resp===null||resp===void 0?void 0:(_resp$data2=resp.data)===null||_resp$data2===void 0?void 0:(_resp$data2$data=_resp$data2.data)===null||_resp$data2$data===void 0?void 0:(_resp$data2$data$data=_resp$data2$data.dataItems[0])===null||_resp$data2$data$data===void 0?void 0:_resp$data2$data$data.transactionId);}}return/*#__PURE__*/React.createElement(IonPage,{className:\"BookTruck-Location\"},/*#__PURE__*/React.createElement(IonContent,null,screen.status===\"\"&&/*#__PURE__*/React.createElement(\"div\",{className:\"invoice-book-container componentMargins\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonLabel,{className:\"bold-font\"},\"Total Amount paid\")),/*#__PURE__*/React.createElement(IonCol,{class:\"ion-text-end1\"},/*#__PURE__*/React.createElement(IonLabel,{className:\"bold-font\"},invoiceList.paidAmount,\" AED\"))),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonLabel,{className:\"bold-font\"},\"Amount to be paid\")),/*#__PURE__*/React.createElement(IonCol,{class:\"ion-text-end1\"},/*#__PURE__*/React.createElement(IonLabel,{className:\"bold-font\"},invoiceList.unpaidAmount,\" AED\"))),(_invoiceList$invoiceL=invoiceList.invoiceList)===null||_invoiceList$invoiceL===void 0?void 0:_invoiceList$invoiceL.map((item,index)=>/*#__PURE__*/React.createElement(\"div\",{key:index,className:index!==0?\"invoicecard-cont\":\"\"},/*#__PURE__*/React.createElement(InvoiceCard,{item:item})))),screen.status===\"SUCC\"&&/*#__PURE__*/React.createElement(Success,{txnId:screen.reference_num}),screen.status===\"FAIL\"&&/*#__PURE__*/React.createElement(Fail,{txnId:screen.reference_num}),screen.status===\"PEND\"&&/*#__PURE__*/React.createElement(Pending,{txnId:screen.reference_num}),(invoiceList.unpaidAmount<1||screen.status===\"SUCC\"||screen.status===\"FAIL\"||screen.status===\"PEND\")&&/*#__PURE__*/React.createElement(CenterFooterButton,{iconType:\"menu\",clickEvent:()=>history.push(\"/tabs/landing\")})),invoiceList.unpaidAmount<1||screen.status===\"SUCC\"||screen.status===\"FAIL\"||screen.status===\"PEND\"?/*#__PURE__*/React.createElement(Footer,null):/*#__PURE__*/React.createElement(BlueFooter,{onBlueFooterClick:()=>payAmount(),footerLabel:\"PAY AMOUNT\"}));};export default ManualInvoice;","map":{"version":3,"sources":["D:/DT/ptmsCheckOutNew/New-MobileApp/src/pages/ManualInvoice/InvoiceTabs/Tabs/ManualInvoice.tsx"],"names":["IonCol","IonContent","IonLabel","IonPage","IonRow","React","useEffect","useState","useHistory","BlueFooter","Footer","updatePaymentStatus","Store","getInvoiceDetails","payManualInvoice","postToExternalSite","CenterFooterButton","Fail","Pending","Success","InvoiceCard","ManualInvoice","InvoiceDetails","history","invoiceList","setinvoiceList","screen","setscreen","getAllInvoice","paymentStatus","status","reference_num","paymentSta","dispatch","resp","bookingNumber","success","data","dataItems","subscribe","getState","VariableValues","payAmount","url","transactionId","paidAmount","unpaidAmount","map","item","index","push"],"mappings":"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","sourcesContent":["import {\r\n  IonCol,\r\n  IonContent,\r\n  IonFooter,\r\n  IonItem,\r\n  IonLabel,\r\n  IonPage,\r\n  IonRow,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport BlueFooter from \"../../../../components/Footer/BlueFooter\";\r\nimport Footer from \"../../../../components/Footer/Footer\";\r\nimport { updatePaymentStatus } from \"../../../../redux/actions/AllActions\";\r\nimport Store from \"../../../../redux/Store\";\r\nimport { createArrayOfObjectWithKeyAndValue } from \"../../../../services/Common\";\r\nimport {\r\n  getInvoiceDetails,\r\n  payManualInvoice,\r\n} from \"../../../../services/EndPointApi\";\r\nimport { postToExternalSite } from \"../../../../services/PaymentService\";\r\nimport CenterFooterButton from \"../../../CenterFooterButton\";\r\nimport Fail from \"../../../PaymentStatus/Fail\";\r\nimport Pending from \"../../../PaymentStatus/Pending\";\r\nimport Success from \"../../../PaymentStatus/Success\";\r\nimport InvoiceCard from \"../InvoiceCard\";\r\n\r\ninterface ManualInvoiceProps {\r\n  InvoiceDetails;\r\n}\r\n\r\nconst ManualInvoice: React.FC<ManualInvoiceProps> = ({ InvoiceDetails }) => {\r\n  let history: any = useHistory();\r\n  const [invoiceList, setinvoiceList] = useState<any>({});\r\n  const [screen, setscreen] = useState<any>({});\r\n  useEffect(() => {\r\n    getAllInvoice();\r\n  }, []);\r\n\r\n  async function getAllInvoice() {\r\n    var paymentStatus = { status: \"\", reference_num: \"0\" };\r\n    var paymentSta = updatePaymentStatus(paymentStatus);\r\n    if (paymentSta) Store.dispatch(paymentSta);\r\n    var resp = await getInvoiceDetails(InvoiceDetails.bookingNumber);\r\n    if (resp?.success) {\r\n      setinvoiceList(resp.data.data.dataItems[0]);\r\n    }\r\n  }\r\n  Store.subscribe(() => {\r\n    setscreen(Store.getState().VariableValues.paymentStatus);\r\n  });\r\n  async function payAmount() {\r\n    var resp = await payManualInvoice(invoiceList);\r\n    if (resp?.success) {\r\n      postToExternalSite(\r\n        resp?.data?.data?.dataItems[0]?.url,\r\n        resp?.data?.data?.dataItems[0]?.transactionId\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <IonPage className=\"BookTruck-Location\">\r\n      <IonContent>\r\n        {screen.status === \"\" && (\r\n          <div className=\"invoice-book-container componentMargins\">\r\n            <IonRow>\r\n              <IonCol>\r\n                <IonLabel className=\"bold-font\">Total Amount paid</IonLabel>\r\n              </IonCol>\r\n              <IonCol class=\"ion-text-end1\">\r\n                <IonLabel className=\"bold-font\">\r\n                  {invoiceList.paidAmount} AED\r\n                </IonLabel>\r\n              </IonCol>\r\n            </IonRow>\r\n            <IonRow>\r\n              <IonCol>\r\n                <IonLabel className=\"bold-font\">Amount to be paid</IonLabel>\r\n              </IonCol>\r\n              <IonCol class=\"ion-text-end1\">\r\n                <IonLabel className=\"bold-font\">\r\n                  {invoiceList.unpaidAmount} AED\r\n                </IonLabel>\r\n              </IonCol>\r\n            </IonRow>\r\n            {invoiceList.invoiceList?.map((item, index) => (\r\n              <div\r\n                key={index}\r\n                className={index !== 0 ? \"invoicecard-cont\" : \"\"}\r\n              >\r\n                <InvoiceCard item={item} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n        {screen.status === \"SUCC\" && <Success txnId={screen.reference_num} />}\r\n        {screen.status === \"FAIL\" && <Fail txnId={screen.reference_num} />}\r\n        {screen.status === \"PEND\" && <Pending txnId={screen.reference_num} />}\r\n        {(invoiceList.unpaidAmount < 1 ||\r\n          screen.status === \"SUCC\" ||\r\n          screen.status === \"FAIL\" ||\r\n          screen.status === \"PEND\") && (\r\n          <CenterFooterButton\r\n            iconType=\"menu\"\r\n            clickEvent={() => history.push(\"/tabs/landing\")}\r\n          />\r\n        )}\r\n      </IonContent>\r\n\r\n      {invoiceList.unpaidAmount < 1 ||\r\n      screen.status === \"SUCC\" ||\r\n      screen.status === \"FAIL\" ||\r\n      screen.status === \"PEND\" ? (\r\n        <Footer />\r\n      ) : (\r\n        <BlueFooter\r\n          onBlueFooterClick={() => payAmount()}\r\n          footerLabel=\"PAY AMOUNT\"\r\n        />\r\n      )}\r\n    </IonPage>\r\n  );\r\n};\r\nexport default ManualInvoice;\r\n"]},"metadata":{},"sourceType":"module"}