{"ast":null,"code":"import React,{useState}from\"react\";import{connect}from\"react-redux\";import Store from\"../../redux/Store\";import*as reduxActions from\"../../redux/actionTypes/AllActionTypes\";import ContainerCard from\"../../components/ContainerCard\";import\"./ContainerCart.scss\";import{IonContent,IonPage}from\"@ionic/react\";import Header from\"../../components/Header\";import InformationText from\"../../components/Texts/InformationText\";import BlueFooter from\"../../components/Footer/BlueFooter\";import SlideUpModal from\"../../components/PopUp/SlideUpModal\";import DeclarationDetails from\"./DeclarationDetails\";import{useHistory}from\"react-router-dom\";import SortedContainerList from\"../../components/SortedContainerList/SortedContainerList\";import CartNumber from\"../../components/CartNumber\";import Alert from\"../../components/alert/Alert\";const ContainerCart=(props,_ref)=>{let{declaList,dataForBookTruck}=_ref;return function(dataForBookTruck){var _props$declaList;console.log(props.declaList);var dataForBookTruck=[];var isdiff=\"test\";let history=useHistory();const[showModal,setshowModal]=useState(false);const[selectedIndexNumber,setselectedIndexNumber]=useState({});const[alertPopup,setAlertPopup]=useState(false);const alertProps={isShow:alertPopup,message:\"\",content:\" Are you sure to remove the container?\",icon:\"<img src='/assets/icon/are-you-sure.svg'/>\",alertAction:removeSelectedConainer,itemName:\"\",// cancelPolicy: true\nokButtonName:\"Continue\",cancelButtonName:\"Cancel\"};function openDeclaDetails(modalState,declIndex,contaIndex,item){console.log(item);setselectedIndexNumber({declIndex:declIndex,contaIndex:contaIndex,item});setshowModal(modalState);}function goToBookTruck(){props.declaList.map((item,index)=>{item.containerList.map(container=>{if(container.selected){dataForBookTruck.push(container);//setShowPopover({ showPopover: true, event: \"\" });\n}});});if(dataForBookTruck.length>0){props.addContainerListToBook(dataForBookTruck);history.push(\"/bookTruckTab\");}}function removeSelectedConainer(ite,actionType){console.log(actionType);setAlertPopup(false);if(actionType){var declarationList=props.declaList;console.log(declarationList,selectedIndexNumber);declarationList[selectedIndexNumber.declIndex].selected=false;declarationList[selectedIndexNumber.declIndex].selectedNumber=declarationList[selectedIndexNumber.declIndex].selectedNumber-1;declarationList[selectedIndexNumber.declIndex].containerList[selectedIndexNumber.contaIndex].selected=false;props.updateContainersInCart(declarationList[selectedIndexNumber.declIndex].containerList[selectedIndexNumber.contaIndex]);}else{}}return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(Header,{label:\"Containers\",action:\"home\",locationProps:props,agentHeader:true// searchClick={this.onSearchClick}`Share ${speaker.name}`\n}),/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(Alert,{alertProps:alertProps}),/*#__PURE__*/React.createElement(SlideUpModal,{showModal:showModal,openOrCloseModal:modalState=>setshowModal(modalState),content:/*#__PURE__*/React.createElement(DeclarationDetails,{item:selectedIndexNumber.item,click:()=>{setshowModal(false);setAlertPopup(true);}})}),/*#__PURE__*/React.createElement(\"div\",{className:\"info-text\"},/*#__PURE__*/React.createElement(InformationText,{message:\"\".concat(props.numberOfSelectedContainers.cartNumber,\" containers\")})),/*#__PURE__*/React.createElement(\"div\",{className:\"container-list\"},(_props$declaList=props.declaList)===null||_props$declaList===void 0?void 0:_props$declaList.map((decla,declIndex)=>decla===null||decla===void 0?void 0:decla.containerList.map((item,contaIndex)=>{return/*#__PURE__*/React.createElement(\"div\",{key:contaIndex},item.selected&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(SortedContainerList,{isDiff:isdiff===decla.referenceNumber?true:false,item:item,content:/*#__PURE__*/React.createElement(ContainerCard,{containerItem:item,key:contaIndex,containerClick:()=>openDeclaDetails(true,declIndex,contaIndex,item)})}),/*#__PURE__*/React.createElement(\"div\",{hidden:true},isdiff=decla.referenceNumber)));}))),/*#__PURE__*/React.createElement(\"div\",{hidden:true},/*#__PURE__*/React.createElement(CartNumber,null))),/*#__PURE__*/React.createElement(BlueFooter,{onBlueFooterClick:goToBookTruck,footerLabel:\"Book Truck\"}));}(dataForBookTruck);};const mapStateToProps=state=>{return{declaList:state.Cart,numberOfSelectedContainers:state.VariableValues};};const mapDispatchToProps=()=>{return{updateContainersInCart:item=>{Store.dispatch({type:reduxActions.UPDATE_CONTAINER_IN_CART,payLoad:item});},addContainerListToBook:item=>{Store.dispatch({type:reduxActions.BOOK_TRUCK_SINGLE_LOCATION,payLoad:item});}};};export default connect(mapStateToProps,mapDispatchToProps)(ContainerCart);","map":{"version":3,"sources":["D:/DT/ptmsCheckOutNew/New-MobileApp/src/pages/ContainerCart/ContainerCart.tsx"],"names":["React","useState","connect","Store","reduxActions","ContainerCard","IonContent","IonPage","Header","InformationText","BlueFooter","SlideUpModal","DeclarationDetails","useHistory","SortedContainerList","CartNumber","Alert","ContainerCart","props","declaList","dataForBookTruck","console","log","isdiff","history","showModal","setshowModal","selectedIndexNumber","setselectedIndexNumber","alertPopup","setAlertPopup","alertProps","isShow","message","content","icon","alertAction","removeSelectedConainer","itemName","okButtonName","cancelButtonName","openDeclaDetails","modalState","declIndex","contaIndex","item","goToBookTruck","map","index","containerList","container","selected","push","length","addContainerListToBook","ite","actionType","declarationList","selectedNumber","updateContainersInCart","numberOfSelectedContainers","cartNumber","decla","referenceNumber","mapStateToProps","state","Cart","VariableValues","mapDispatchToProps","dispatch","type","UPDATE_CONTAINER_IN_CART","payLoad","BOOK_TRUCK_SINGLE_LOCATION"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Store from \"../../redux/Store\";\r\nimport * as reduxActions from \"../../redux/actionTypes/AllActionTypes\";\r\nimport ContainerCard from \"../../components/ContainerCard\";\r\nimport \"./ContainerCart.scss\";\r\nimport { IonContent, IonItem, IonLabel, IonPage } from \"@ionic/react\";\r\nimport Header from \"../../components/Header\";\r\nimport InformationText from \"../../components/Texts/InformationText\";\r\nimport BlueFooter from \"../../components/Footer/BlueFooter\";\r\nimport SlideUpModal from \"../../components/PopUp/SlideUpModal\";\r\nimport DeclarationDetails from \"./DeclarationDetails\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport SortedContainerList from \"../../components/SortedContainerList/SortedContainerList\";\r\nimport CartNumber from \"../../components/CartNumber\";\r\nimport Alert from \"../../components/alert/Alert\";\r\n\r\ninterface ownProps {\r\n  declaList;\r\n  numberOfSelectedContainers;\r\n  addContainerListToBook;\r\n  updateContainersInCart;\r\n}\r\n\r\ninterface stateProps {}\r\ntype containerCartProps = ownProps & stateProps;\r\nconst ContainerCart: React.FC<containerCartProps> = (\r\n  props,\r\n  { declaList, dataForBookTruck }\r\n) => {\r\n  console.log(props.declaList);\r\n  var dataForBookTruck: any = [];\r\n  var isdiff = \"test\";\r\n  let history = useHistory();\r\n  const [showModal, setshowModal] = useState(false);\r\n  const [selectedIndexNumber, setselectedIndexNumber] = useState<any>({});\r\n  const [alertPopup, setAlertPopup] = useState(false);\r\n\r\n  const alertProps = {\r\n    isShow: alertPopup,\r\n    message: \"\",\r\n    content: \" Are you sure to remove the container?\",\r\n    icon: \"<img src='/assets/icon/are-you-sure.svg'/>\",\r\n    alertAction: removeSelectedConainer,\r\n\r\n    itemName: \"\",\r\n    // cancelPolicy: true\r\n    okButtonName: \"Continue\",\r\n    cancelButtonName: \"Cancel\",\r\n  };\r\n\r\n  function openDeclaDetails(modalState, declIndex?, contaIndex?, item?) {\r\n    console.log(item);\r\n    setselectedIndexNumber({\r\n      declIndex: declIndex,\r\n      contaIndex: contaIndex,\r\n      item,\r\n    });\r\n    setshowModal(modalState);\r\n  }\r\n\r\n  function goToBookTruck() {\r\n    props.declaList.map((item, index) => {\r\n      item.containerList.map((container) => {\r\n        if (container.selected) {\r\n          dataForBookTruck.push(container);\r\n          //setShowPopover({ showPopover: true, event: \"\" });\r\n        }\r\n      });\r\n    });\r\n\r\n    if (dataForBookTruck.length > 0) {\r\n      props.addContainerListToBook(dataForBookTruck);\r\n      history.push(\"/bookTruckTab\");\r\n    }\r\n  }\r\n\r\n  function removeSelectedConainer(ite, actionType) {\r\n    console.log(actionType);\r\n    setAlertPopup(false);\r\n\r\n    if (actionType) {\r\n      var declarationList = props.declaList;\r\n      console.log(declarationList, selectedIndexNumber);\r\n      declarationList[selectedIndexNumber.declIndex].selected = false;\r\n      declarationList[selectedIndexNumber.declIndex].selectedNumber =\r\n        declarationList[selectedIndexNumber.declIndex].selectedNumber - 1;\r\n      declarationList[selectedIndexNumber.declIndex].containerList[\r\n        selectedIndexNumber.contaIndex\r\n      ].selected = false;\r\n\r\n      props.updateContainersInCart(\r\n        declarationList[selectedIndexNumber.declIndex].containerList[\r\n          selectedIndexNumber.contaIndex\r\n        ]\r\n      );\r\n    } else {\r\n    }\r\n  }\r\n  return (\r\n    <IonPage>\r\n      <Header\r\n        label=\"Containers\"\r\n        action=\"home\"\r\n        locationProps={props}\r\n        agentHeader={true}\r\n        // searchClick={this.onSearchClick}`Share ${speaker.name}`\r\n      />\r\n      <IonContent>\r\n        <Alert alertProps={alertProps} />\r\n        <SlideUpModal\r\n          showModal={showModal}\r\n          openOrCloseModal={(modalState) => setshowModal(modalState)}\r\n          content={\r\n            <DeclarationDetails\r\n              item={selectedIndexNumber.item}\r\n              click={() => {\r\n                setshowModal(false);\r\n                setAlertPopup(true);\r\n              }}\r\n            />\r\n          }\r\n        />\r\n        <div className=\"info-text\">\r\n          <InformationText\r\n            message={`${props.numberOfSelectedContainers.cartNumber} containers`}\r\n          />\r\n        </div>\r\n        <div className=\"container-list\">\r\n          {props.declaList?.map((decla, declIndex) =>\r\n            decla?.containerList.map((item, contaIndex) => {\r\n              return (\r\n                <div key={contaIndex}>\r\n                  {item.selected && (\r\n                    <>\r\n                      <SortedContainerList\r\n                        isDiff={isdiff === decla.referenceNumber ? true : false}\r\n                        item={item}\r\n                        content={\r\n                          <ContainerCard\r\n                            containerItem={item}\r\n                            key={contaIndex}\r\n                            containerClick={() =>\r\n                              openDeclaDetails(\r\n                                true,\r\n                                declIndex,\r\n                                contaIndex,\r\n                                item\r\n                              )\r\n                            }\r\n                          />\r\n                        }\r\n                      />\r\n                      <div hidden={true}>\r\n                        {(isdiff = decla.referenceNumber)}\r\n                      </div>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              );\r\n            })\r\n          )}\r\n        </div>\r\n        <div hidden={true}>\r\n          <CartNumber />\r\n        </div>\r\n      </IonContent>\r\n      <BlueFooter onBlueFooterClick={goToBookTruck} footerLabel=\"Book Truck\" />\r\n    </IonPage>\r\n  );\r\n};\r\nconst mapStateToProps = (state: any) => {\r\n  return {\r\n    declaList: state.Cart,\r\n    numberOfSelectedContainers: state.VariableValues,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = () => {\r\n  return {\r\n    updateContainersInCart: (item: any) => {\r\n      Store.dispatch({\r\n        type: reduxActions.UPDATE_CONTAINER_IN_CART,\r\n        payLoad: item,\r\n      });\r\n    },\r\n\r\n    addContainerListToBook: (item: any) => {\r\n      Store.dispatch({\r\n        type: reduxActions.BOOK_TRUCK_SINGLE_LOCATION,\r\n        payLoad: item,\r\n      });\r\n    },\r\n  };\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContainerCart);\r\n"]},"metadata":{},"sourceType":"module"}