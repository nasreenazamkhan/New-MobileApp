{"ast":null,"code":"import{IonCol,IonContent,IonLabel,IonPage,IonRow}from\"@ionic/react\";import React,{useEffect,useState}from\"react\";import*as EndPointURL from\"../../util/EndPointURL\";import{httpGetCallWithoutHeader,httpPostCallWithoutHeaderAndBody}from\"../../services/EndPointApi\";import\"./Notifications.scss\";import MainTabs from\"../MainTabs\";import Store from\"../../redux/Store\";import Header from\"../../components/Header\";export default function Notifications(props){console.log(props);const[newnNotfication,setNewNotification]=useState([]);const[refresh,setRefresh]=useState(0);const[accessedNotfication,setAccessedNotfication]=useState([]);const[agent,setAgent]=useState();Store.subscribe(()=>{setAgent(Store.getState().CheckUserStatus.user.selectedAgent);});useEffect(()=>{var response=httpGetCallWithoutHeader(EndPointURL.fetchAllNotificationUrl);response.then(result=>{if(result.success){console.log(\"result\",JSON.stringify(result.data.data.dataItems));let data1=result.data.data.dataItems.filter(item=>item.accessed===\"N\");console.log(\"data1\",JSON.stringify(data1));setNewNotification(data1);let data2=result.data.data.dataItems.filter(item=>item.accessed===\"Y\");console.log(\"data2\",JSON.stringify(data2));setAccessedNotfication(data2);}});},[agent,refresh]);const onNewNotificationClick=async(resId,appLink)=>{let appUrl=EndPointURL.fetchAllNotificationUrl+\"/\"+resId;var response=await httpPostCallWithoutHeaderAndBody(appUrl);if(await response.success){setRefresh(prev=>prev+1);if(appLink!==null)props.history.push(appLink);}};return/*#__PURE__*/React.createElement(IonPage,{id:\"notifications-page\"},/*#__PURE__*/React.createElement(Header,{label:\"Notifications\",action:\"search\",showAgent:true,agentHeader:true}),/*#__PURE__*/React.createElement(IonContent,{\"padding-top\":true,className:\"page-content\",fullscreen:true,scrollEvents:true,scrollY:true},/*#__PURE__*/React.createElement(IonRow,{className:\"divider\"},/*#__PURE__*/React.createElement(IonCol,{size:\"12\",className:\"full-width\"},/*#__PURE__*/React.createElement(IonRow,{className:\"sort-divider\"},/*#__PURE__*/React.createElement(IonLabel,{className:\"data-font\"},\"New\"))),newnNotfication.length>0?newnNotfication.filter(item=>item.accessed===\"N\").map((item,index)=>/*#__PURE__*/React.createElement(IonCol,{size:\"12\",className:\"full-width\",key:index,onClick:()=>onNewNotificationClick(item.responseUuid,item.appNotificationDto.appLink)},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonLabel,{className:\"notification-font\"},item.appNotificationDto.message)),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonLabel,{className:\"notification-date\"},item.duration)))):/*#__PURE__*/React.createElement(IonCol,{size:\"12\",className:\"full-width ion-text-center\"},/*#__PURE__*/React.createElement(IonLabel,{className:\"notification-date\"},\"No Notification to show\"))),/*#__PURE__*/React.createElement(IonRow,{className:\"accessed-status\"},/*#__PURE__*/React.createElement(IonCol,{size:\"12\",className:\"full-width\"},/*#__PURE__*/React.createElement(IonRow,{className:\"sort-divider\"},/*#__PURE__*/React.createElement(IonLabel,{className:\"data-font\"},\"Earlier\"))),accessedNotfication.length>0?accessedNotfication.filter(item=>item.accessed===\"Y\").map((item,index)=>/*#__PURE__*/React.createElement(IonCol,{size:\"12\",className:\"full-width\",key:index},/*#__PURE__*/React.createElement(IonRow,{onClick:()=>{if(item.appNotificationDto.appLink!==null)props.history.push(item.appNotificationDto.appLink);}},/*#__PURE__*/React.createElement(IonLabel,{className:\"notification-font\"},item.appNotificationDto.message)),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonLabel,{className:\"notification-date\"},item.duration)))):/*#__PURE__*/React.createElement(IonCol,{size:\"12\",className:\"full-width ion-text-center\"},/*#__PURE__*/React.createElement(IonLabel,{className:\"notification-date\"},\"No Notification to show\")))),/*#__PURE__*/React.createElement(IonContent,{style:{maxHeight:\"86px\"}},/*#__PURE__*/React.createElement(MainTabs,{selected:true})));}","map":{"version":3,"sources":["D:/DT/ptmsCheckOutNew/New-MobileApp/src/pages/pushNotification/Notifications.tsx"],"names":["IonCol","IonContent","IonLabel","IonPage","IonRow","React","useEffect","useState","EndPointURL","httpGetCallWithoutHeader","httpPostCallWithoutHeaderAndBody","MainTabs","Store","Header","Notifications","props","console","log","newnNotfication","setNewNotification","refresh","setRefresh","accessedNotfication","setAccessedNotfication","agent","setAgent","subscribe","getState","CheckUserStatus","user","selectedAgent","response","fetchAllNotificationUrl","then","result","success","JSON","stringify","data","dataItems","data1","filter","item","accessed","data2","onNewNotificationClick","resId","appLink","appUrl","prev","history","push","length","map","index","responseUuid","appNotificationDto","message","duration","maxHeight"],"mappings":"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","sourcesContent":["import {\r\n  IonCol,\r\n  IonContent,\r\n  IonLabel,\r\n  IonPage,\r\n  IonRow,\r\n} from \"@ionic/react\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport * as EndPointURL from \"../../util/EndPointURL\";\r\nimport {\r\n  httpGetCallWithoutHeader,\r\n  httpPostCallWithoutHeaderAndBody\r\n} from \"../../services/EndPointApi\";\r\nimport \"./Notifications.scss\";\r\nimport MainTabs from \"../MainTabs\";\r\nimport Store from \"../../redux/Store\";\r\nimport Header from \"../../components/Header\";\r\n\r\nexport default function Notifications(props: any) {\r\n  console.log(props);\r\n  const [newnNotfication, setNewNotification] = useState([]);\r\n  const [refresh, setRefresh] = useState(0);\r\n  const [accessedNotfication, setAccessedNotfication] = useState([]);\r\n  const [agent, setAgent] = useState();\r\n  Store.subscribe(() => {\r\n    setAgent(Store.getState().CheckUserStatus.user.selectedAgent);\r\n  });\r\n\r\n  useEffect(() => {\r\n    var response = httpGetCallWithoutHeader(\r\n      EndPointURL.fetchAllNotificationUrl\r\n    );\r\n    response.then((result) => {\r\n      if (result.success) {\r\n        console.log(\"result\", JSON.stringify(result.data.data.dataItems));\r\n        let data1 = result.data.data.dataItems.filter(\r\n          (item) => item.accessed === \"N\"\r\n        );\r\n        console.log(\"data1\", JSON.stringify(data1));\r\n        setNewNotification(data1);\r\n        let data2 = result.data.data.dataItems.filter(\r\n          (item) => item.accessed === \"Y\"\r\n        );\r\n        console.log(\"data2\", JSON.stringify(data2));\r\n        setAccessedNotfication(data2);\r\n      }\r\n    });\r\n  }, [agent, refresh]);\r\n\r\n  const onNewNotificationClick = async (resId, appLink) => {\r\n    let appUrl = EndPointURL.fetchAllNotificationUrl + \"/\" + resId;\r\n    var response = await httpPostCallWithoutHeaderAndBody(appUrl);\r\n    if (await response.success) {\r\n      setRefresh(prev => prev+1)\r\n      if (appLink !== null) props.history.push(appLink);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonPage id=\"notifications-page\">\r\n      <Header\r\n        label=\"Notifications\"\r\n        action=\"search\"\r\n        showAgent={true}\r\n        agentHeader={true}\r\n      />\r\n      <IonContent\r\n        padding-top\r\n        className=\"page-content\"\r\n        fullscreen\r\n        scrollEvents={true}\r\n        scrollY={true}\r\n      >\r\n        <IonRow className=\"divider\">\r\n          <IonCol size=\"12\" className=\"full-width\">\r\n            <IonRow className=\"sort-divider\">\r\n              <IonLabel className=\"data-font\">New</IonLabel>\r\n            </IonRow>\r\n          </IonCol>\r\n          {newnNotfication.length > 0 ? (\r\n            newnNotfication\r\n              .filter((item) => item.accessed === \"N\")\r\n              .map((item, index) => (\r\n                <IonCol\r\n                  size=\"12\"\r\n                  className=\"full-width\"\r\n                  key={index}\r\n                  onClick={() =>\r\n                    onNewNotificationClick(\r\n                      item.responseUuid,\r\n                      item.appNotificationDto.appLink\r\n                    )\r\n                  }\r\n                >\r\n                  <IonRow>\r\n                    <IonLabel className=\"notification-font\">\r\n                      {item.appNotificationDto.message}\r\n                    </IonLabel>\r\n                  </IonRow>\r\n                  <IonRow>\r\n                    <IonLabel className=\"notification-date\">\r\n                      {item.duration}\r\n                    </IonLabel>\r\n                  </IonRow>\r\n                </IonCol>\r\n              ))\r\n          ) : (\r\n            <IonCol size=\"12\" className=\"full-width ion-text-center\">\r\n              <IonLabel className=\"notification-date\">\r\n                No Notification to show\r\n              </IonLabel>\r\n            </IonCol>\r\n          )}\r\n        </IonRow>\r\n        <IonRow className=\"accessed-status\">\r\n          <IonCol size=\"12\" className=\"full-width\">\r\n            <IonRow className=\"sort-divider\">\r\n              <IonLabel className=\"data-font\">Earlier</IonLabel>\r\n            </IonRow>\r\n          </IonCol>\r\n          {accessedNotfication.length > 0 ? (\r\n            accessedNotfication\r\n              .filter((item) => item.accessed === \"Y\")\r\n              .map((item, index) => (\r\n                <IonCol size=\"12\" className=\"full-width\" key={index}>\r\n                  <IonRow\r\n                    onClick={() => {\r\n                      if (item.appNotificationDto.appLink !== null)\r\n                        props.history.push(item.appNotificationDto.appLink);\r\n                    }}\r\n                  >\r\n                    <IonLabel className=\"notification-font\">\r\n                      {item.appNotificationDto.message}\r\n                    </IonLabel>\r\n                  </IonRow>\r\n                  <IonRow>\r\n                    <IonLabel className=\"notification-date\">\r\n                      {item.duration}\r\n                    </IonLabel>\r\n                  </IonRow>\r\n                </IonCol>\r\n              ))\r\n          ) : (\r\n            <IonCol size=\"12\" className=\"full-width ion-text-center\">\r\n              <IonLabel className=\"notification-date\">\r\n                No Notification to show\r\n              </IonLabel>\r\n            </IonCol>\r\n          )}\r\n        </IonRow>\r\n      </IonContent>\r\n      <IonContent style={{ maxHeight: \"86px\" }}>\r\n        <MainTabs selected={true} />\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}