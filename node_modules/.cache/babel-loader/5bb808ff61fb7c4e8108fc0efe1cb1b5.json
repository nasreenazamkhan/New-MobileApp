{"ast":null,"code":"import React,{useState}from\"react\";import Icon from\"../../components/Icon\";import{updatePaymentStatus}from\"../../redux/actions/AllActions\";import Store from\"../../redux/Store\";import{reInitializePayment}from\"../../services/EndPointApi\";import{postToExternalSite}from\"../../services/PaymentService\";import\"./PaymentStatus.scss\";import Pending from\"./Pending\";import Success from\"./Success\";const Fail=_ref=>{let{txnId}=_ref;const failIconProps={name:\"error\",class:\"zoom84\"};const[screen,setscreen]=useState({});Store.subscribe(()=>{setscreen(Store.getState().VariableValues.paymentStatus);console.log(Store.getState().VariableValues.paymentStatus,\"calling store\",screen);});async function retryPayment(){var paymentStatus={status:\"\",reference_num:\"0\"};var paymentSta=updatePaymentStatus(paymentStatus);if(paymentSta)Store.dispatch(paymentSta);var response=await reInitializePayment(txnId);if(response===null||response===void 0?void 0:response.success){var _response$data,_response$data$data,_response$data$data$d;console.log(response);postToExternalSite(response.data.data.dataItems[0].url,response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:(_response$data$data=_response$data.data)===null||_response$data$data===void 0?void 0:(_response$data$data$d=_response$data$data.dataItems[0])===null||_response$data$data$d===void 0?void 0:_response$data$data$d.transactionId);}else{// setErrors({\n//   ...errors,\n//   general:\n//     response.data.message || response.data.data.dataItems[0].error,\n// });\n}}return/*#__PURE__*/React.createElement(\"div\",{className:\"fail-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"icon-container\"},\" \",/*#__PURE__*/React.createElement(Icon,{iconProps:failIconProps})),/*#__PURE__*/React.createElement(\"div\",{className:\"failLabel\"},\"Payment Failed!\"),/*#__PURE__*/React.createElement(\"div\",{className:\"sub-label\"},\"Unfortunately, we encounter an error while processing your payment for the booking. Any amount deducted from your account will be refund in 3 to 5 business days\"),/*#__PURE__*/React.createElement(\"div\",{className:\"booking-label\"},\" \",\"Please check your payment details and try again.\"),/*#__PURE__*/React.createElement(\"div\",{className:\"button-outline\",onClick:()=>retryPayment()},/*#__PURE__*/React.createElement(\"div\",{className:\"button-label\"},\"Try Again\"))),screen.status===\"SUCC\"&&/*#__PURE__*/React.createElement(Success,{txnId:screen.reference_num}),screen.status===\"FAIL\"&&/*#__PURE__*/React.createElement(Fail,{txnId:screen.reference_num}),screen.status===\"PEND\"&&/*#__PURE__*/React.createElement(Pending,{txnId:screen.reference_num}));};export default Fail;","map":{"version":3,"sources":["D:/DT/ptmsCheckOutNew/New-MobileApp/src/pages/PaymentStatus/Fail.tsx"],"names":["React","useState","Icon","updatePaymentStatus","Store","reInitializePayment","postToExternalSite","Pending","Success","Fail","txnId","failIconProps","name","class","screen","setscreen","subscribe","getState","VariableValues","paymentStatus","console","log","retryPayment","status","reference_num","paymentSta","dispatch","response","success","data","dataItems","url","transactionId"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,IAAP,KAAiB,uBAAjB,CACA,OAASC,mBAAT,KAAoC,gCAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA,OAASC,mBAAT,KAAoC,4BAApC,CACA,OAASC,kBAAT,KAAmC,+BAAnC,CACA,MAAO,sBAAP,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAMA,KAAMC,CAAAA,IAAyB,CAAG,MAAe,IAAd,CAAEC,KAAF,CAAc,MAC/C,KAAMC,CAAAA,aAAa,CAAG,CAAEC,IAAI,CAAE,OAAR,CAAiBC,KAAK,CAAE,QAAxB,CAAtB,CACA,KAAM,CAACC,MAAD,CAASC,SAAT,EAAsBd,QAAQ,CAAM,EAAN,CAApC,CAEAG,KAAK,CAACY,SAAN,CAAgB,IAAM,CACpBD,SAAS,CAACX,KAAK,CAACa,QAAN,GAAiBC,cAAjB,CAAgCC,aAAjC,CAAT,CACAC,OAAO,CAACC,GAAR,CACEjB,KAAK,CAACa,QAAN,GAAiBC,cAAjB,CAAgCC,aADlC,CAEE,eAFF,CAGEL,MAHF,EAKD,CAPD,EASA,cAAeQ,CAAAA,YAAf,EAA8B,CAC5B,GAAIH,CAAAA,aAAa,CAAG,CAAEI,MAAM,CAAE,EAAV,CAAcC,aAAa,CAAE,GAA7B,CAApB,CACA,GAAIC,CAAAA,UAAU,CAAGtB,mBAAmB,CAACgB,aAAD,CAApC,CACA,GAAIM,UAAJ,CAAgBrB,KAAK,CAACsB,QAAN,CAAeD,UAAf,EAChB,GAAIE,CAAAA,QAAQ,CAAG,KAAMtB,CAAAA,mBAAmB,CAACK,KAAD,CAAxC,CACA,GAAIiB,QAAJ,SAAIA,QAAJ,iBAAIA,QAAQ,CAAEC,OAAd,CAAuB,8DACrBR,OAAO,CAACC,GAAR,CAAYM,QAAZ,EACArB,kBAAkB,CAChBqB,QAAQ,CAACE,IAAT,CAAcA,IAAd,CAAmBC,SAAnB,CAA6B,CAA7B,EAAgCC,GADhB,CAEhBJ,QAFgB,SAEhBA,QAFgB,iCAEhBA,QAAQ,CAAEE,IAFM,8DAEhB,eAAgBA,IAFA,qEAEhB,oBAAsBC,SAAtB,CAAgC,CAAhC,CAFgB,gDAEhB,sBAAoCE,aAFpB,CAAlB,CAID,CAND,IAMO,CACL;AACA;AACA;AACA;AACA;AACD,CACF,CACD,mBACE,2BAAK,SAAS,CAAC,gBAAf,eACE,2BAAK,SAAS,CAAC,SAAf,eACE,2BAAK,SAAS,CAAC,gBAAf,EACG,GADH,cAEE,oBAAC,IAAD,EAAM,SAAS,CAAErB,aAAjB,EAFF,CADF,cAKE,2BAAK,SAAS,CAAC,WAAf,oBALF,cAME,2BAAK,SAAS,CAAC,WAAf,qKANF,cAWE,2BAAK,SAAS,CAAC,eAAf,EACG,GADH,oDAXF,cAeE,2BAAK,SAAS,CAAC,gBAAf,CAAgC,OAAO,CAAE,IAAMW,YAAY,EAA3D,eACE,2BAAK,SAAS,CAAC,cAAf,cADF,CAfF,CADF,CAqBGR,MAAM,CAACS,MAAP,GAAkB,MAAlB,eAA4B,oBAAC,OAAD,EAAS,KAAK,CAAET,MAAM,CAACU,aAAvB,EArB/B,CAsBGV,MAAM,CAACS,MAAP,GAAkB,MAAlB,eAA4B,oBAAC,IAAD,EAAM,KAAK,CAAET,MAAM,CAACU,aAApB,EAtB/B,CAuBGV,MAAM,CAACS,MAAP,GAAkB,MAAlB,eAA4B,oBAAC,OAAD,EAAS,KAAK,CAAET,MAAM,CAACU,aAAvB,EAvB/B,CADF,CA2BD,CA3DD,CA4DA,cAAef,CAAAA,IAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport Icon from \"../../components/Icon\";\r\nimport { updatePaymentStatus } from \"../../redux/actions/AllActions\";\r\nimport Store from \"../../redux/Store\";\r\nimport { reInitializePayment } from \"../../services/EndPointApi\";\r\nimport { postToExternalSite } from \"../../services/PaymentService\";\r\nimport \"./PaymentStatus.scss\";\r\nimport Pending from \"./Pending\";\r\nimport Success from \"./Success\";\r\n\r\ninterface FailProps {\r\n  txnId;\r\n}\r\n\r\nconst Fail: React.FC<FailProps> = ({ txnId }) => {\r\n  const failIconProps = { name: \"error\", class: \"zoom84\" };\r\n  const [screen, setscreen] = useState<any>({});\r\n\r\n  Store.subscribe(() => {\r\n    setscreen(Store.getState().VariableValues.paymentStatus);\r\n    console.log(\r\n      Store.getState().VariableValues.paymentStatus,\r\n      \"calling store\",\r\n      screen\r\n    );\r\n  });\r\n\r\n  async function retryPayment() {\r\n    var paymentStatus = { status: \"\", reference_num: \"0\" };\r\n    var paymentSta = updatePaymentStatus(paymentStatus);\r\n    if (paymentSta) Store.dispatch(paymentSta);\r\n    var response = await reInitializePayment(txnId);\r\n    if (response?.success) {\r\n      console.log(response);\r\n      postToExternalSite(\r\n        response.data.data.dataItems[0].url,\r\n        response?.data?.data?.dataItems[0]?.transactionId\r\n      );\r\n    } else {\r\n      // setErrors({\r\n      //   ...errors,\r\n      //   general:\r\n      //     response.data.message || response.data.data.dataItems[0].error,\r\n      // });\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"fail-container\">\r\n      <div className=\"content\">\r\n        <div className=\"icon-container\">\r\n          {\" \"}\r\n          <Icon iconProps={failIconProps} />\r\n        </div>\r\n        <div className=\"failLabel\">Payment Failed!</div>\r\n        <div className=\"sub-label\">\r\n          Unfortunately, we encounter an error while processing your payment for\r\n          the booking. Any amount deducted from your account will be refund in 3\r\n          to 5 business days\r\n        </div>\r\n        <div className=\"booking-label\">\r\n          {\" \"}\r\n          Please check your payment details and try again.\r\n        </div>\r\n        <div className=\"button-outline\" onClick={() => retryPayment()}>\r\n          <div className=\"button-label\">Try Again</div>\r\n        </div>\r\n      </div>\r\n\r\n      {screen.status === \"SUCC\" && <Success txnId={screen.reference_num} />}\r\n      {screen.status === \"FAIL\" && <Fail txnId={screen.reference_num} />}\r\n      {screen.status === \"PEND\" && <Pending txnId={screen.reference_num} />}\r\n    </div>\r\n  );\r\n};\r\nexport default Fail;\r\n"]},"metadata":{},"sourceType":"module"}