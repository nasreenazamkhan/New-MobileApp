{"ast":null,"code":"import React,{useState}from\"react\";import{IonCard,IonCardContent,IonCol,IonIcon,IonLabel,IonRow,IonText}from\"@ionic/react\";import{SocialSharing}from\"@ionic-native/social-sharing\";import*as EndPointURL from\"../../../../util/EndPointURL\";import{httpGetCallWithoutHeader,httpPostCallWithoutHeaderAndBody}from\"../../../../services/EndPointApi\";import\"./BookingCard.scss\";import RoundedAvatar from\"../../../../components/Avatar/RoundedAvatar\";import{postToExternalSite}from'../../../../services/PaymentService';const BookingCard=MyBookingParam=>{var _padStart,_padStart2,_padStart3,_padStart4,_padStart5;const[paymentPage,setPaymentPage]=useState(\"\");var ref;var txnIds;var options=\"zoom=no,footer=no,location=no\";// const [screen, setscreen] = useState<any>({});\nconst openReceiptForm=async bookingNumber=>{let appUrl=EndPointURL.downloadReceipt+bookingNumber;var response=await httpGetCallWithoutHeader(appUrl);if(await response.success){SocialSharing.share(\"Your Payment Receipt\",\"Booking-Receipt-\"+bookingNumber,\"data:application/pdf;base64,\"+response.data,null);}};async function paymentInfo(bookingNumber){console.log(\"paymentInfo\",bookingNumber);var appUrl=EndPointURL.reinitializeUrl+bookingNumber;var response=await httpPostCallWithoutHeaderAndBody(appUrl);if(await response.success){var url=await response.data.data.dataItems[0].url;var txnId=await response.data.data.dataItems[0].transactionId;await postToExternalSite(url,txnId);}// let paymentStatus = updatePaymentStatus({ status: \"SUCC\", reference_num: 1234546789 });\n// Store.dispatch(paymentStatus)\n}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{id:\"booking-card\"},/*#__PURE__*/React.createElement(IonCard,{className:\"lightShadow\"},/*#__PURE__*/React.createElement(IonCardContent,{className:\"card-content\",onClick:MyBookingParam.clickCard},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,{size:\"5\"},/*#__PURE__*/React.createElement(IonText,{className:\"booking-number-font\"},MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.bookingNumber)),/*#__PURE__*/React.createElement(IonCol,{size:\"1\"},/*#__PURE__*/React.createElement(IonIcon,{src:\"/assets/icon/container.svg\",className:\"container-icon\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"3\",className:\"padding-left\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonText,{className:\"data-font\"},(_padStart=((MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.noOfContainers)+\"\").padStart(2,\"0\"))!==null&&_padStart!==void 0?_padStart:0)),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonText,{className:\"title-font\"},\"Containers\"))),/*#__PURE__*/React.createElement(IonCol,{size:\"1\"},/*#__PURE__*/React.createElement(IonIcon,{src:\"/assets/icon/truck-grey.svg\",className:\"container-icon\"})),/*#__PURE__*/React.createElement(IonCol,{size:\"2\",className:\"padding-left\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonText,{className:\"data-font\"},(_padStart2=((MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.noOfTrucks)+\"\").padStart(2,\"0\"))!==null&&_padStart2!==void 0?_padStart2:0)),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonText,{className:\"title-font\"},\"Trucks\")))),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,{size:\"5\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonText,{className:\"regular-font\"},\"Amount Paid\")),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonText,{className:\"data-font\"},MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.amount,\" AED\"))),/*#__PURE__*/React.createElement(IonCol,{size:\"5\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonText,{className:\"regular-font\"},\"Booked On\")),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonText,{className:\"data-font\"},MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.bookedOn))),/*#__PURE__*/React.createElement(IonCol,{size:\"2\"},/*#__PURE__*/React.createElement(IonRow,{className:\"ion-justify-content-center\"},(MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.paymentStatus)!==\"PPAY\"&&(MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.paymentStatus)!==\"FPAY\"?/*#__PURE__*/React.createElement(IonIcon,{className:\"booking-receipt-icon\",src:\"assets/icon/document-share.svg\",onClick:e=>{openReceiptForm(MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.bookingNumber);}}):/*#__PURE__*/React.createElement(IonIcon,{className:\"booking-receipt-icon\",src:\"assets/icon/document-share-disable.svg\",onClick:e=>{e.stopPropagation();}}))))),((MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.paymentStatus)===\"TRANSCONF\"||(MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.paymentStatus)===\"STARTED\")&&/*#__PURE__*/React.createElement(IonCardContent,{className:\"container-status-row\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,{size:\"4\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,{size:\"8\"},\"In Progress\"),/*#__PURE__*/React.createElement(IonCol,{size:\"4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"avatar\",style:{backgroundColor:\"#FF9F5F\"}},(_padStart3=((MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.town)+(MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.yard)+\"\").padStart(2,\"0\"))!==null&&_padStart3!==void 0?_padStart3:0)))),/*#__PURE__*/React.createElement(IonCol,{size:\"4\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,{size:\"8\",style:{paddingLeft:\"15px\"}},\"Delivered\"),/*#__PURE__*/React.createElement(IonCol,{size:\"4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"avatar\",style:{backgroundColor:\"#76BD7D\"}},(_padStart4=((MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.delivered)+\"\").padStart(2,\"0\"))!==null&&_padStart4!==void 0?_padStart4:0)))),/*#__PURE__*/React.createElement(IonCol,{size:\"4\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,{size:\"8\",style:{paddingLeft:\"15px\"}},\"Completed\"),/*#__PURE__*/React.createElement(IonCol,{size:\"4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"avatar\",style:{backgroundColor:\"#168FE4\"}},(_padStart5=((MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.completed)+\"\").padStart(2,\"0\"))!==null&&_padStart5!==void 0?_padStart5:0)))))),(MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.paymentStatus)===\"FPAY\"&&/*#__PURE__*/React.createElement(IonCardContent,{className:\"payment-fail-card-content\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,{size:\"1\"},/*#__PURE__*/React.createElement(RoundedAvatar,{color:\"#E91818\",bookingCard:true})),/*#__PURE__*/React.createElement(IonCol,{size:\"7\"},/*#__PURE__*/React.createElement(IonLabel,{className:\"payment-text\"},\"Payment Failed\")),/*#__PURE__*/React.createElement(IonCol,{onClick:()=>paymentInfo(MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.bookingNumber)},/*#__PURE__*/React.createElement(IonIcon,{className:\"repayment-icon\",src:\"assets/icon/refresh.svg\"}),/*#__PURE__*/React.createElement(IonLabel,{className:\"repayment-text\"},\"Re-initiate\")))),(MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.paymentStatus)===\"PPAY\"&&/*#__PURE__*/React.createElement(IonCardContent,{className:\"payment-pending-card-content\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,{size:\"1\"},/*#__PURE__*/React.createElement(RoundedAvatar,{color:\"#FFB200\",bookingCard:true})),/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonLabel,{className:\"payment-text\"},\"Waiting for Payment confirmation\")))),(MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.paymentStatus)===\"completed\"&&/*#__PURE__*/React.createElement(IonCardContent,{className:\"payment-pending-card-content\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,{size:\"1\"},/*#__PURE__*/React.createElement(RoundedAvatar,{color:\"#1360D2\",bookingCard:true})),/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonLabel,{className:\"payment-text\"},\"MT IN Delivered\")))),(MyBookingParam===null||MyBookingParam===void 0?void 0:MyBookingParam.paymentStatus)===\"SUCC\"&&/*#__PURE__*/React.createElement(IonCardContent,{className:\"payment-pending-card-content\"},/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,{size:\"1\"},/*#__PURE__*/React.createElement(RoundedAvatar,{color:\"#FFC350\",bookingCard:true})),/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonLabel,{className:\"payment-text\"},\"Transporter Pending\")))))));};export default React.memo(BookingCard);","map":{"version":3,"sources":["D:/DT/ptmsCheckOutNew/New-MobileApp/src/pages/myBooking/bookingDetails/bookingCard/BookingCard.tsx"],"names":["React","useState","IonCard","IonCardContent","IonCol","IonIcon","IonLabel","IonRow","IonText","SocialSharing","EndPointURL","httpGetCallWithoutHeader","httpPostCallWithoutHeaderAndBody","RoundedAvatar","postToExternalSite","BookingCard","MyBookingParam","paymentPage","setPaymentPage","ref","txnIds","options","openReceiptForm","bookingNumber","appUrl","downloadReceipt","response","success","share","data","paymentInfo","console","log","reinitializeUrl","url","dataItems","txnId","transactionId","clickCard","noOfContainers","padStart","noOfTrucks","amount","bookedOn","paymentStatus","e","stopPropagation","backgroundColor","town","yard","paddingLeft","delivered","completed","memo"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  IonCard,\r\n  IonCardContent,\r\n  IonCol,\r\n  IonIcon,\r\n  IonLabel,\r\n  IonRow,\r\n  IonText,\r\n} from \"@ionic/react\";\r\nimport { SocialSharing } from \"@ionic-native/social-sharing\";\r\nimport * as EndPointURL from \"../../../../util/EndPointURL\";\r\nimport {\r\n  httpGetCallWithoutHeader,\r\n  httpPostCallWithoutHeaderAndBody,\r\n} from \"../../../../services/EndPointApi\";\r\nimport { InAppBrowser } from \"@ionic-native/in-app-browser\";\r\nimport \"./BookingCard.scss\";\r\nimport RoundedAvatar from \"../../../../components/Avatar/RoundedAvatar\";\r\nimport { postToExternalSite } from '../../../../services/PaymentService';\r\nimport Store from \"../../../../redux/Store\";\r\nimport Success from \"../../../PaymentStatus/Success\";\r\nimport Fail from \"../../../PaymentStatus/Fail\";\r\nimport Pending from \"../../../PaymentStatus/Pending\";\r\n\r\nimport {\r\n  updateDRaftsPopupInHome,\r\n  updatePaymentStatus,\r\n} from \"../../../../redux/actions/AllActions\";\r\n\r\ninterface MyBookingParam {\r\n  bookingNumber?: string;\r\n  amount?: string;\r\n  bookedOn?: string;\r\n  noOfContainers?: any;\r\n  // countTitle?: string;\r\n  clickCard?(e: any): void;\r\n  paymentClick?(e: any): void;\r\n  yard?: string;\r\n  town?: string;\r\n  status: string;\r\n  delivered: string;\r\n  completed: string;\r\n  paymentStatus: string;\r\n  noOfTrucks?: string;\r\n}\r\n\r\nconst BookingCard: React.FC<MyBookingParam> = (MyBookingParam) => {\r\n  const [paymentPage, setPaymentPage] = useState(\"\");\r\n  var ref;\r\n  var txnIds;\r\n  var options = \"zoom=no,footer=no,location=no\";\r\n\r\n  // const [screen, setscreen] = useState<any>({});\r\n\r\n  const openReceiptForm = async (bookingNumber: string) => {\r\n    let appUrl = EndPointURL.downloadReceipt + bookingNumber;\r\n    var response = await httpGetCallWithoutHeader(appUrl);\r\n    if (await response.success) {\r\n      SocialSharing.share(\r\n        \"Your Payment Receipt\",\r\n        \"Booking-Receipt-\" + bookingNumber,\r\n        \"data:application/pdf;base64,\" + response.data,\r\n        null\r\n      );\r\n    }\r\n  };\r\n\r\n  async function paymentInfo(bookingNumber) {\r\n    console.log(\"paymentInfo\", bookingNumber);\r\n    var appUrl = EndPointURL.reinitializeUrl + bookingNumber;\r\n    var response = await httpPostCallWithoutHeaderAndBody(appUrl);\r\n    if (await response.success) {\r\n      var url = await response.data.data.dataItems[0].url;\r\n      var txnId = await response.data.data.dataItems[0].transactionId;\r\n      await postToExternalSite(url, txnId);\r\n      \r\n    }\r\n    \r\n    // let paymentStatus = updatePaymentStatus({ status: \"SUCC\", reference_num: 1234546789 });\r\n    // Store.dispatch(paymentStatus)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n    {/* {screen.status === \"\" && ( */}\r\n    <div id=\"booking-card\">\r\n      <IonCard className=\"lightShadow\">\r\n        <IonCardContent className=\"card-content\" onClick={MyBookingParam.clickCard}>\r\n          <IonRow>\r\n            <IonCol size=\"5\">\r\n              <IonText className=\"booking-number-font\">\r\n                {MyBookingParam?.bookingNumber}\r\n              </IonText>\r\n            </IonCol>\r\n            <IonCol size=\"1\">\r\n              <IonIcon\r\n                src=\"/assets/icon/container.svg\"\r\n                className=\"container-icon\"\r\n              />\r\n            </IonCol>\r\n            <IonCol size=\"3\" className=\"padding-left\">\r\n              <IonRow>\r\n                <IonText className=\"data-font\">\r\n                  {(MyBookingParam?.noOfContainers + \"\").padStart(2, \"0\") ?? 0}\r\n                </IonText>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonText className=\"title-font\">Containers</IonText>\r\n              </IonRow>\r\n            </IonCol>\r\n            <IonCol size=\"1\">\r\n              <IonIcon\r\n                src=\"/assets/icon/truck-grey.svg\"\r\n                className=\"container-icon\"\r\n              />\r\n            </IonCol>\r\n            <IonCol size=\"2\" className=\"padding-left\">\r\n              <IonRow>\r\n                <IonText className=\"data-font\">\r\n                  {(MyBookingParam?.noOfTrucks + \"\").padStart(2, \"0\") ?? 0}\r\n                </IonText>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonText className=\"title-font\">Trucks</IonText>\r\n              </IonRow>\r\n            </IonCol>\r\n          </IonRow>\r\n          <IonRow>\r\n            <IonCol size=\"5\">\r\n              <IonRow>\r\n                <IonText className=\"regular-font\">Amount Paid</IonText>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonText className=\"data-font\">\r\n                  {MyBookingParam?.amount} AED\r\n                </IonText>\r\n              </IonRow>\r\n            </IonCol>\r\n            <IonCol size=\"5\">\r\n              <IonRow>\r\n                <IonText className=\"regular-font\">Booked On</IonText>\r\n              </IonRow>\r\n              <IonRow>\r\n                <IonText className=\"data-font\">\r\n                  {MyBookingParam?.bookedOn}\r\n                </IonText>\r\n              </IonRow>\r\n            </IonCol>\r\n            <IonCol size=\"2\">\r\n              <IonRow className=\"ion-justify-content-center\">\r\n                {MyBookingParam?.paymentStatus !== \"PPAY\" &&\r\n                MyBookingParam?.paymentStatus !== \"FPAY\" ? (\r\n                  <IonIcon\r\n                    className=\"booking-receipt-icon\"\r\n                    src=\"assets/icon/document-share.svg\"\r\n                    onClick={(e) => {\r\n                      openReceiptForm(MyBookingParam?.bookingNumber);\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  <IonIcon\r\n                    className=\"booking-receipt-icon\"\r\n                    src=\"assets/icon/document-share-disable.svg\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                    }}\r\n                  />\r\n                )}\r\n              </IonRow>\r\n            </IonCol>\r\n          </IonRow>\r\n        </IonCardContent>\r\n        {(MyBookingParam?.paymentStatus === \"TRANSCONF\" ||\r\n          MyBookingParam?.paymentStatus === \"STARTED\") && (\r\n          <IonCardContent className=\"container-status-row\">\r\n            <IonRow>\r\n              <IonCol size=\"4\">\r\n                <IonRow>\r\n                  <IonCol size=\"8\">In Progress</IonCol>\r\n                  <IonCol size=\"4\">\r\n                    <div\r\n                      className=\"avatar\"\r\n                      style={{ backgroundColor: \"#FF9F5F\" }}\r\n                    >\r\n                      {(\r\n                        MyBookingParam?.town +\r\n                        MyBookingParam?.yard +\r\n                        \"\"\r\n                      ).padStart(2, \"0\") ?? 0}\r\n                    </div>\r\n                  </IonCol>\r\n                </IonRow>\r\n              </IonCol>\r\n              <IonCol size=\"4\">\r\n                <IonRow>\r\n                  <IonCol size=\"8\" style={{ paddingLeft: \"15px\" }}>\r\n                    Delivered\r\n                  </IonCol>\r\n                  <IonCol size=\"4\">\r\n                    <div\r\n                      className=\"avatar\"\r\n                      style={{ backgroundColor: \"#76BD7D\" }}\r\n                    >\r\n                      {(MyBookingParam?.delivered + \"\").padStart(2, \"0\") ?? 0}\r\n                    </div>\r\n                  </IonCol>\r\n                </IonRow>\r\n              </IonCol>\r\n              <IonCol size=\"4\">\r\n                <IonRow>\r\n                  <IonCol size=\"8\" style={{ paddingLeft: \"15px\" }}>\r\n                    Completed\r\n                  </IonCol>\r\n                  <IonCol size=\"4\">\r\n                    <div\r\n                      className=\"avatar\"\r\n                      style={{ backgroundColor: \"#168FE4\" }}\r\n                    >\r\n                      {(MyBookingParam?.completed + \"\").padStart(2, \"0\") ?? 0}\r\n                    </div>\r\n                  </IonCol>\r\n                </IonRow>\r\n              </IonCol>\r\n            </IonRow>\r\n          </IonCardContent>\r\n        )}\r\n        {MyBookingParam?.paymentStatus === \"FPAY\" && (\r\n          <IonCardContent className=\"payment-fail-card-content\">\r\n            <IonRow>\r\n              <IonCol size=\"1\">\r\n                <RoundedAvatar color={\"#E91818\"} bookingCard={true} />\r\n              </IonCol>\r\n              <IonCol size=\"7\">\r\n                <IonLabel className=\"payment-text\">Payment Failed</IonLabel>\r\n              </IonCol>\r\n              <IonCol\r\n                onClick={() => paymentInfo(MyBookingParam?.bookingNumber)}\r\n              >\r\n                <IonIcon\r\n                  className=\"repayment-icon\"\r\n                  src=\"assets/icon/refresh.svg\"\r\n                />\r\n                <IonLabel className=\"repayment-text\">Re-initiate</IonLabel>\r\n              </IonCol>\r\n            </IonRow>\r\n          </IonCardContent>\r\n        )}\r\n        {MyBookingParam?.paymentStatus === \"PPAY\" && (\r\n          <IonCardContent className=\"payment-pending-card-content\">\r\n            <IonRow>\r\n              <IonCol size=\"1\">\r\n                <RoundedAvatar color={\"#FFB200\"} bookingCard={true} />\r\n              </IonCol>\r\n              <IonCol>\r\n                <IonLabel className=\"payment-text\">\r\n                  Waiting for Payment confirmation\r\n                </IonLabel>\r\n              </IonCol>\r\n            </IonRow>\r\n          </IonCardContent>\r\n        )}\r\n        {MyBookingParam?.paymentStatus === \"completed\" && (\r\n          <IonCardContent className=\"payment-pending-card-content\">\r\n            <IonRow>\r\n              <IonCol size=\"1\">\r\n                <RoundedAvatar color={\"#1360D2\"} bookingCard={true} />\r\n              </IonCol>\r\n              <IonCol>\r\n                <IonLabel className=\"payment-text\">MT IN Delivered</IonLabel>\r\n              </IonCol>\r\n            </IonRow>\r\n          </IonCardContent>\r\n        )}\r\n        {MyBookingParam?.paymentStatus === \"SUCC\" && (\r\n          <IonCardContent className=\"payment-pending-card-content\">\r\n            <IonRow>\r\n              <IonCol size=\"1\">\r\n                <RoundedAvatar color={\"#FFC350\"} bookingCard={true} />\r\n              </IonCol>\r\n              <IonCol>\r\n                <IonLabel className=\"payment-text\">\r\n                  Transporter Pending\r\n                </IonLabel>\r\n              </IonCol>\r\n            </IonRow>\r\n          </IonCardContent>\r\n        )}\r\n      </IonCard>\r\n    </div>\r\n  \r\n    {/* )} */}\r\n    {/* {screen.status === \"SUCC\" && <Success txnId={screen.reference_num} />}\r\n    {screen.status === \"FAIL\" && <Fail txnId={screen.reference_num} />}\r\n    {screen.status === \"PEND\" && <Pending txnId={screen.reference_num} />} */}\r\n    </div>\r\n    );\r\n};\r\n\r\nexport default React.memo(BookingCard);\r\n"]},"metadata":{},"sourceType":"module"}