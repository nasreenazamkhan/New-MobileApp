{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import{IonPage,IonContent,IonGrid}from\"@ionic/react\";import StatusCard from\"./statusCard/StatusCard\";import*as EndPointURL from\"../../../util/EndPointURL\";import Header from\"../../../components/Header\";import{httpGetCallWithoutHeader}from\"../../../services/EndPointApi\";import Store from\"../../../redux/Store\";export default function Status(props){var _countsRequest$result,_countsRequest$result2,_countsRequest$result3;console.log(props);let history=useHistory();const[countsRequest,setCountsRequest]=useState({});const[agent,setAgent]=useState();Store.subscribe(()=>{setAgent(Store.getState().CheckUserStatus.user.selectedAgent);});useEffect(()=>{getCountRequest();console.log(\"call status\",agent);},[agent]);const onBookingClick=()=>{history.push(\"/bookingDetails/ALL\");};const onPODClick=()=>{history.push(\"/tabs/status/pod/listAllPod\");};const onInvoiceClick=()=>{history.push(\"/tabs/status/miscellaneous\");};const getCountRequest=async()=>{var response=await httpGetCallWithoutHeader(EndPointURL.fetchRequestStatusCountsUrl);if(await(response===null||response===void 0?void 0:response.success)){var _response$data,_response$data$data;var respObj=response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:(_response$data$data=_response$data.data)===null||_response$data$data===void 0?void 0:_response$data$data.dataItems[0];Object.keys(respObj).forEach(function(key){respObj[key]=respObj[key]<10?\"0\"+respObj[key]:respObj[key];});await setCountsRequest({...countsRequest,result:respObj});}};const onSearchClick=()=>{history.push(\"/search-booking\");};const goBack=()=>{history.push(\"/tabs/landing\");};return/*#__PURE__*/React.createElement(IonPage,{id:\"status-page\"},/*#__PURE__*/React.createElement(Header,{label:\"Status\",action:\"search\",searchClick:onSearchClick,showAgent:true,customBack:true,backClick:goBack,agentHeader:true}),/*#__PURE__*/React.createElement(IonContent,{fullscreen:true,\"padding-top\":true,className:\"page-content\"},/*#__PURE__*/React.createElement(IonGrid,{\"margin-top\":true},/*#__PURE__*/React.createElement(StatusCard,{type:\"All Bookings\",total:countsRequest===null||countsRequest===void 0?void 0:(_countsRequest$result=countsRequest.result)===null||_countsRequest$result===void 0?void 0:_countsRequest$result.ALL,handleClick:onBookingClick}),/*#__PURE__*/React.createElement(StatusCard,{type:\"Verify POD's\",total:(_countsRequest$result2=countsRequest.result)===null||_countsRequest$result2===void 0?void 0:_countsRequest$result2.PODUPL,handleClick:onPODClick}),/*#__PURE__*/React.createElement(StatusCard,{type:\"Miscellaneous Invoices\",total:(_countsRequest$result3=countsRequest.result)===null||_countsRequest$result3===void 0?void 0:_countsRequest$result3.INVAPPR,handleClick:onInvoiceClick}))));}","map":{"version":3,"sources":["D:/DT/ptmsCheckOutNew/New-MobileApp/src/pages/myBooking/status/Status.tsx"],"names":["React","useState","useEffect","useHistory","IonPage","IonContent","IonGrid","StatusCard","EndPointURL","Header","httpGetCallWithoutHeader","Store","Status","props","console","log","history","countsRequest","setCountsRequest","agent","setAgent","subscribe","getState","CheckUserStatus","user","selectedAgent","getCountRequest","onBookingClick","push","onPODClick","onInvoiceClick","response","fetchRequestStatusCountsUrl","success","respObj","data","dataItems","Object","keys","forEach","key","result","onSearchClick","goBack","ALL","PODUPL","INVAPPR"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { IonPage, IonContent, IonGrid } from \"@ionic/react\";\r\nimport StatusCard from \"./statusCard/StatusCard\";\r\nimport * as EndPointURL from \"../../../util/EndPointURL\";\r\nimport Header from \"../../../components/Header\";\r\nimport { httpGetCallWithoutHeader } from \"../../../services/EndPointApi\";\r\nimport Store from \"../../../redux/Store\";\r\n\r\nexport default function Status(props) {\r\n  console.log(props);\r\n  let history = useHistory();\r\n  const [countsRequest, setCountsRequest] = useState<any>({});\r\n  const [agent, setAgent] = useState();\r\n  Store.subscribe(() => {\r\n    setAgent(Store.getState().CheckUserStatus.user.selectedAgent);\r\n  });\r\n\r\n  useEffect(() => {\r\n    getCountRequest();\r\n    console.log(\"call status\", agent);\r\n  }, [agent]);\r\n\r\n  const onBookingClick = () => {\r\n    history.push(\"/bookingDetails/ALL\");\r\n  };\r\n  const onPODClick = () => {\r\n    history.push(\"/tabs/status/pod/listAllPod\");\r\n  };\r\n  const onInvoiceClick = () => {\r\n    history.push(\"/tabs/status/miscellaneous\");\r\n  };\r\n\r\n  const getCountRequest = async () => {\r\n    var response = await httpGetCallWithoutHeader(\r\n      EndPointURL.fetchRequestStatusCountsUrl\r\n    );\r\n    if (await response?.success) {\r\n      var respObj = response?.data?.data?.dataItems[0];\r\n      Object.keys(respObj).forEach(function (key) {\r\n        respObj[key] = respObj[key] < 10 ? \"0\" + respObj[key] : respObj[key];\r\n      });\r\n\r\n      await setCountsRequest({\r\n        ...countsRequest,\r\n        result: respObj,\r\n      });\r\n    }\r\n  };\r\n\r\n  const onSearchClick = () => {\r\n    history.push(\"/search-booking\");\r\n  };\r\n\r\n  const goBack = () => {\r\n    history.push(\"/tabs/landing\");\r\n  };\r\n\r\n  return (\r\n    <IonPage id=\"status-page\">\r\n      <Header\r\n        label=\"Status\"\r\n        action=\"search\"\r\n        searchClick={onSearchClick}\r\n        showAgent={true}\r\n        customBack={true}\r\n        backClick={goBack}\r\n        agentHeader={true}\r\n      />\r\n      <IonContent fullscreen padding-top className=\"page-content\">\r\n        <IonGrid margin-top>\r\n          <StatusCard\r\n            type=\"All Bookings\"\r\n            total={countsRequest?.result?.ALL}\r\n            handleClick={onBookingClick}\r\n          />\r\n          <StatusCard\r\n            type=\"Verify POD's\"\r\n            total={countsRequest.result?.PODUPL}\r\n            handleClick={onPODClick}\r\n          />\r\n          <StatusCard\r\n            type=\"Miscellaneous Invoices\"\r\n            total={countsRequest.result?.INVAPPR}\r\n            handleClick={onInvoiceClick}\r\n          />\r\n        </IonGrid>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}