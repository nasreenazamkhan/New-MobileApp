{"ast":null,"code":"import{IonContent,IonLabel,IonPage,IonRouterOutlet,IonTabBar,IonTabButton,IonTabs}from\"@ionic/react\";import React,{useState}from\"react\";import{Redirect,Route}from\"react-router\";import Header from\"../../components/Header\";import Review from\"./Review/Review\";import BookTruck from\"./BookTruck\";import BookTruckPaymnet from\"./BookTruckPaymnet\";import\"./BookTruckTab.scss\";import Store from\"../../redux/Store\";import{saveDraft}from\"../../services/EndPointApi\";import SlideUpModal from\"../../components/PopUp/SlideUpModal\";import DraftPopup from\"../SaveDraft/DraftPopup\";import{BOOK_TRUCK_CLEAR}from\"../../redux/actionTypes/AllActionTypes\";const BookTruckTab=props=>{const[headerClickActionType,setheaderClickActionType]=useState(\"false\");const[alertPopup,setAlertPopup]=useState(false);function goingOutOfthePage(actionType){setheaderClickActionType(actionType);setAlertPopup(true);}function doSaveDraft(){var truckDetails=Store.getState().TruckBook;var encryptedDraftId=Store.getState().VariableValues.encryptedDraftId;console.log(encryptedDraftId);var containerDetailsDtoList=createcontainerDetailsDtoList(truckDetails.containerList);const currentStep=props.location.pathname.split(\"/\").pop();var draftObjFormat={requestDetailsDraft:JSON.stringify(truckDetails),containerDetailsDtoList:containerDetailsDtoList,currentStep:currentStep+\"\",encryptedDraftId:encryptedDraftId};var resp=saveDraft(draftObjFormat);props.history.push(headerClickActionType);}function createcontainerDetailsDtoList(containerList){var containerDetailsDto=[];var containerDetailsDtoObj={};containerList.forEach(element=>{containerDetailsDtoObj={container_number:element.container_number,dpwTransactionId:element.dpwTransactionId};containerDetailsDto.push(containerDetailsDtoObj);});return containerDetailsDto;}const handleHeaderClick=actionType=>{Store.dispatch({type:BOOK_TRUCK_CLEAR});if(actionType){setAlertPopup(false);doSaveDraft();}else{if(headerClickActionType===\"/containerCart\")props.history.goBack();else props.history.push(headerClickActionType);}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(IonPage,{className:\"bookTruckTab\"},/*#__PURE__*/React.createElement(Header,{label:\"Book Truck\",action:\"home\",agentHeader:true,locationProps:props,customClick:goingOutOfthePage}),/*#__PURE__*/React.createElement(IonContent,{className:\"tabContent\"},/*#__PURE__*/React.createElement(SlideUpModal,{showModal:alertPopup,openOrCloseModal:modalState=>setAlertPopup(modalState),content:/*#__PURE__*/React.createElement(DraftPopup,{draftOkClick:handleHeaderClick})}),/*#__PURE__*/React.createElement(IonTabs,{className:\"declaration-tab\"},/*#__PURE__*/React.createElement(IonRouterOutlet,null,/*#__PURE__*/React.createElement(Redirect,{exact:true,path:\"/bookTruckTab\",to:\"/bookTruckTab/location\"}),/*#__PURE__*/React.createElement(Route,{path:\"/bookTruckTab/location\",component:BookTruck// render={() => <BookTruck />}\n,exact:true}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/bookTruckTab/review\",component:Review//render={(props) => <Review />}\n}),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/bookTruckTab/payment\",component:BookTruckPaymnet//render={() => <BookTruckPaymnet />}\n})),/*#__PURE__*/React.createElement(IonTabBar,{slot:\"top\"},/*#__PURE__*/React.createElement(IonTabButton,{tab:\"location\",href:\"/bookTruckTab/location\"},/*#__PURE__*/React.createElement(IonLabel,null,\"Location\")),/*#__PURE__*/React.createElement(IonTabButton,{disabled:props.location.pathname===\"/quickBook/book\",tab:\"Review\",href:\"/bookTruckTab/review\"},/*#__PURE__*/React.createElement(IonLabel,null,\"Review\")),/*#__PURE__*/React.createElement(IonTabButton,{disabled:props.location.pathname===\"/quickBook/book\",tab:\"Payment\",href:\"/bookTruckTab/payment\"},/*#__PURE__*/React.createElement(IonLabel,null,\"Payment\")))))));};export default BookTruckTab;","map":{"version":3,"sources":["D:/DT/ptmsCheckOutNew/New-MobileApp/src/pages/booktruck/BookTruckTab.tsx"],"names":["IonContent","IonLabel","IonPage","IonRouterOutlet","IonTabBar","IonTabButton","IonTabs","React","useState","Redirect","Route","Header","Review","BookTruck","BookTruckPaymnet","Store","saveDraft","SlideUpModal","DraftPopup","BOOK_TRUCK_CLEAR","BookTruckTab","props","headerClickActionType","setheaderClickActionType","alertPopup","setAlertPopup","goingOutOfthePage","actionType","doSaveDraft","truckDetails","getState","TruckBook","encryptedDraftId","VariableValues","console","log","containerDetailsDtoList","createcontainerDetailsDtoList","containerList","currentStep","location","pathname","split","pop","draftObjFormat","requestDetailsDraft","JSON","stringify","resp","history","push","containerDetailsDto","containerDetailsDtoObj","forEach","element","container_number","dpwTransactionId","handleHeaderClick","dispatch","type","goBack","modalState"],"mappings":"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","sourcesContent":["import {\r\n  IonBackButton,\r\n  IonButton,\r\n  IonButtons,\r\n  IonContent,\r\n  IonHeader,\r\n  IonIcon,\r\n  IonLabel,\r\n  IonPage,\r\n  IonRouterOutlet,\r\n  IonTabBar,\r\n  IonTabButton,\r\n  IonTabs,\r\n  IonTitle,\r\n  IonToolbar,\r\n} from \"@ionic/react\";\r\nimport { calendar, searchOutline } from \"ionicons/icons\";\r\nimport React, { useState } from \"react\";\r\nimport { Redirect, Route, RouteComponentProps } from \"react-router\";\r\nimport BlueFooter from \"../../components/Footer/BlueFooter\";\r\nimport Header from \"../../components/Header\";\r\nimport PayQuick from \"../../components/PayQuick\";\r\nimport Review from \"./Review/Review\";\r\nimport BookTruck from \"./BookTruck\";\r\nimport BookTruckPaymnet from \"./BookTruckPaymnet\";\r\n\r\nimport \"./BookTruckTab.scss\";\r\nimport Store from \"../../redux/Store\";\r\nimport { saveDraft } from \"../../services/EndPointApi\";\r\nimport Alert from \"../../components/alert/Alert\";\r\nimport SlideUpModal from \"../../components/PopUp/SlideUpModal\";\r\nimport DraftPopup from \"../SaveDraft/DraftPopup\";\r\nimport { BOOK_TRUCK_CLEAR } from \"../../redux/actionTypes/AllActionTypes\";\r\n\r\ninterface BookTruckTabProps extends RouteComponentProps {}\r\n\r\nconst BookTruckTab: React.FC<BookTruckTabProps> = (props) => {\r\n  const [headerClickActionType, setheaderClickActionType] = useState(\"false\");\r\n  const [alertPopup, setAlertPopup] = useState(false);\r\n\r\n  function goingOutOfthePage(actionType) {\r\n    setheaderClickActionType(actionType);\r\n    setAlertPopup(true);\r\n  }\r\n\r\n  function doSaveDraft() {\r\n    var truckDetails: any = Store.getState().TruckBook;\r\n    var encryptedDraftId: any =\r\n      Store.getState().VariableValues.encryptedDraftId;\r\n    console.log(encryptedDraftId);\r\n\r\n    var containerDetailsDtoList = createcontainerDetailsDtoList(\r\n      truckDetails.containerList\r\n    );\r\n    const currentStep = props.location.pathname.split(\"/\").pop();\r\n    var draftObjFormat = {\r\n      requestDetailsDraft: JSON.stringify(truckDetails),\r\n      containerDetailsDtoList: containerDetailsDtoList,\r\n      currentStep: currentStep + \"\",\r\n      encryptedDraftId: encryptedDraftId,\r\n    };\r\n\r\n    var resp = saveDraft(draftObjFormat);\r\n\r\n    props.history.push(headerClickActionType);\r\n  }\r\n\r\n  function createcontainerDetailsDtoList(containerList) {\r\n    var containerDetailsDto = [];\r\n    var containerDetailsDtoObj = {};\r\n    containerList.forEach((element) => {\r\n      containerDetailsDtoObj = {\r\n        container_number: element.container_number,\r\n        dpwTransactionId: element.dpwTransactionId,\r\n      };\r\n      containerDetailsDto.push(containerDetailsDtoObj);\r\n    });\r\n    return containerDetailsDto;\r\n  }\r\n  const handleHeaderClick = (actionType) => {\r\n    Store.dispatch({ type: BOOK_TRUCK_CLEAR });\r\n    if (actionType) {\r\n      setAlertPopup(false);\r\n      doSaveDraft();\r\n    } else {\r\n      if (headerClickActionType === \"/containerCart\") props.history.goBack();\r\n      else props.history.push(headerClickActionType);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <IonPage className=\"bookTruckTab\">\r\n        <Header\r\n          label=\"Book Truck\"\r\n          action=\"home\"\r\n          agentHeader={true}\r\n          locationProps={props}\r\n          customClick={goingOutOfthePage}\r\n        />\r\n\r\n        <IonContent className=\"tabContent\">\r\n          <SlideUpModal\r\n            showModal={alertPopup}\r\n            openOrCloseModal={(modalState) => setAlertPopup(modalState)}\r\n            content={<DraftPopup draftOkClick={handleHeaderClick} />}\r\n          />\r\n          <IonTabs className=\"declaration-tab\">\r\n            <IonRouterOutlet>\r\n              <Redirect\r\n                exact\r\n                path=\"/bookTruckTab\"\r\n                to=\"/bookTruckTab/location\"\r\n              />\r\n              <Route\r\n                path=\"/bookTruckTab/location\"\r\n                component={BookTruck}\r\n                // render={() => <BookTruck />}\r\n                exact={true}\r\n              />\r\n              <Route\r\n                exact={true}\r\n                path=\"/bookTruckTab/review\"\r\n                component={Review}\r\n                //render={(props) => <Review />}\r\n              />\r\n              <Route\r\n                exact={true}\r\n                path=\"/bookTruckTab/payment\"\r\n                component={BookTruckPaymnet}\r\n                //render={() => <BookTruckPaymnet />}\r\n              />\r\n            </IonRouterOutlet>\r\n            <IonTabBar slot=\"top\">\r\n              <IonTabButton tab=\"location\" href=\"/bookTruckTab/location\">\r\n                <IonLabel>Location</IonLabel>\r\n              </IonTabButton>\r\n\r\n              <IonTabButton\r\n                disabled={props.location.pathname === \"/quickBook/book\"}\r\n                tab=\"Review\"\r\n                href=\"/bookTruckTab/review\"\r\n              >\r\n                <IonLabel>Review</IonLabel>\r\n              </IonTabButton>\r\n\r\n              <IonTabButton\r\n                disabled={props.location.pathname === \"/quickBook/book\"}\r\n                tab=\"Payment\"\r\n                href=\"/bookTruckTab/payment\"\r\n              >\r\n                <IonLabel>Payment</IonLabel>\r\n              </IonTabButton>\r\n            </IonTabBar>\r\n          </IonTabs>\r\n        </IonContent>\r\n        {/* <BlueFooter\r\n          onBlueFooterClick={() => console.log()}\r\n          footerLabel=\"Continue\"\r\n        /> */}\r\n      </IonPage>\r\n    </>\r\n  );\r\n};\r\nexport default BookTruckTab;\r\n"]},"metadata":{},"sourceType":"module"}