(this["webpackJsonpcargoes-lift"]=this["webpackJsonpcargoes-lift"]||[]).push([[18],{175:function(e,a,t){"use strict";var n=t(7),l=t(0),o=t.n(l),c=t(58),r=t(157);t(187);a.a=e=>{let{label:a,name:t,type:l,value:s,onChange:i,required:m,errors:d,pattern:u,description:v,placeholder:p,icon:E,max:g,minDate:b,className:f,displayFormat:N,disabled:k}=e;return o.a.createElement(o.a.Fragment,null,o.a.createElement(n.k,{className:f,displayFormat:N,value:s,onIonChange:e=>{i(e,e.detail.value)},onClick:e=>e.stopPropagation(),placeholder:p,max:g||c.k,min:b||c.m,name:t,disabled:k||!1}),E&&o.a.createElement(r.a,{iconProps:E}))}},187:function(e,a,t){},188:function(e,a,t){"use strict";var n=t(0),l=t.n(n);a.a=e=>{let{content:a,label:t,className:n}=e;return l.a.createElement("div",{className:n?n+" form-element-group":"form-element-group"},l.a.createElement("fieldset",null,l.a.createElement("legend",null,t),a))}},202:function(e,a,t){"use strict";var n=t(7),l=t(23),o=t.n(l),c=t(0),r=t.n(c),s=t(58),i=t(175),m=t(188);a.a=e=>{let{openOrCloseModalInsearch:a,headerName:t,searchDates:l,setSearchdate:d}=e;console.log(l);const[u,v]=Object(c.useState)({fromDate:{value:l.fromDate,minDate:"",maxdate:""},toDate:{value:l.toDate,minDate:"",maxdate:""}});console.log(u);const[p,E]=Object(c.useState)({fromDate:"",toDate:""}),g=(e,a)=>{E({fromDate:""}),v(t=>({...t,[e.target.name]:{...u[e.target.name],paramDate:o()(new Date(a)).format("DD/MM/yyyy"),value:a}})),d({...l,[e.target.name]:o()(new Date(a)).format("YYYY-MM-DD")})},b={name:"calendar",slot:"end",class:"calenderMargin"};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"popup-header"},r.a.createElement("div",{className:"header-title"},r.a.createElement("span",null,t))),r.a.createElement("div",{className:"popup-content"},r.a.createElement("div",{className:" twoItems"},r.a.createElement(m.a,{label:"From Date",content:r.a.createElement(i.a,{name:"fromDate",value:u.fromDate.value,label:"From Date",type:"text",required:!0,onChange:g,placeholder:"--/--/----",minDate:s.g,icon:b,className:"leftCalendar",displayFormat:"DD/MMM/YYYY"})}),r.a.createElement(m.a,{label:"To Date",content:r.a.createElement(i.a,{name:"toDate",value:u.toDate.value,label:"To Date",type:"text",required:!0,onChange:g,placeholder:"--/--/----",minDate:s.g,icon:b,className:"rightCalendar",displayFormat:"DD/MMM/YYYY"})})),p.fromDate&&r.a.createElement("div",{className:" twoItems1 validate-date"}," ",r.a.createElement("div",{className:"topMargin"},r.a.createElement(n.M,{color:"danger",className:"validation-message"},r.a.createElement(n.u,{className:"ion-padding-start"},p.fromDate)))),r.a.createElement("div",{className:"twoItems"},r.a.createElement(n.d,{className:"reset",fill:"clear",onClick:()=>(d({fromDate:"",toDate:s.m}),void a(!1,"",""))},"Reset"),r.a.createElement(n.d,{className:"apply-filter",fill:"clear",onClick:()=>{console.log(u.fromDate.paramDate,u.toDate.value,l.toDate),""===u.fromDate.value?E({fromDate:"Choose 'From Date'"}):a(!1,u.fromDate.paramDate,o()(new Date(l.toDate).toISOString()).format("DD/MM/YYYY"))}},"Apply Filter"))))}},204:function(e,a,t){"use strict";var n=t(0),l=t.n(n);t(205);a.a=e=>(console.log(e.color),l.a.createElement("div",{className:e.bookingCard?"booking-avatar":"avatar",style:{backgroundColor:"".concat(e.color)}},e.name))},205:function(e,a,t){},248:function(e,a,t){},249:function(e,a,t){},250:function(e,a,t){},283:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return h}));var n=t(0),l=t.n(n),o=t(7),c=t(177),r=t(8),s=t(56),i=(t(248),t(204)),m=t(180);var d=l.a.memo(e=>{var a,t,d,u,v;const[p,E]=Object(n.useState)("");return l.a.createElement("div",null,l.a.createElement("div",{id:"booking-card"},l.a.createElement(o.e,{className:"lightShadow"},l.a.createElement(o.f,{className:"card-content",onClick:e.clickCard},l.a.createElement(o.B,null,l.a.createElement(o.i,{size:"5"},l.a.createElement(o.M,{className:"booking-number-font"},null===e||void 0===e?void 0:e.bookingNumber)),l.a.createElement(o.i,{size:"1"},l.a.createElement(o.o,{src:"/assets/icon/container.svg",className:"container-icon"})),l.a.createElement(o.i,{size:"3",className:"padding-left"},l.a.createElement(o.B,null,l.a.createElement(o.M,{className:"data-font"},null!==(a=((null===e||void 0===e?void 0:e.noOfContainers)+"").padStart(2,"0"))&&void 0!==a?a:0)),l.a.createElement(o.B,null,l.a.createElement(o.M,{className:"title-font"},"Containers"))),l.a.createElement(o.i,{size:"1"},l.a.createElement(o.o,{src:"/assets/icon/truck-grey.svg",className:"container-icon"})),l.a.createElement(o.i,{size:"2",className:"padding-left"},l.a.createElement(o.B,null,l.a.createElement(o.M,{className:"data-font"},null!==(t=((null===e||void 0===e?void 0:e.noOfTrucks)+"").padStart(2,"0"))&&void 0!==t?t:0)),l.a.createElement(o.B,null,l.a.createElement(o.M,{className:"title-font"},"Trucks")))),l.a.createElement(o.B,null,l.a.createElement(o.i,{size:"5"},l.a.createElement(o.B,null,l.a.createElement(o.M,{className:"regular-font"},"Amount Paid")),l.a.createElement(o.B,null,l.a.createElement(o.M,{className:"data-font"},null===e||void 0===e?void 0:e.amount," AED"))),l.a.createElement(o.i,{size:"5"},l.a.createElement(o.B,null,l.a.createElement(o.M,{className:"regular-font"},"Booked On")),l.a.createElement(o.B,null,l.a.createElement(o.M,{className:"data-font"},null===e||void 0===e?void 0:e.bookedOn))),l.a.createElement(o.i,{size:"2"},l.a.createElement(o.B,{className:"ion-justify-content-center"},"PPAY"!==(null===e||void 0===e?void 0:e.paymentStatus)&&"FPAY"!==(null===e||void 0===e?void 0:e.paymentStatus)?l.a.createElement(o.o,{className:"booking-receipt-icon",src:"assets/icon/document-share.svg",onClick:a=>{(async e=>{let a=r.downloadReceipt+e;var t=await Object(s.w)(a);await t.success&&c.a.share("Your Payment Receipt","Booking-Receipt-"+e,"data:application/pdf;base64,"+t.data,null)})(null===e||void 0===e?void 0:e.bookingNumber)}}):l.a.createElement(o.o,{className:"booking-receipt-icon",src:"assets/icon/document-share-disable.svg",onClick:e=>{e.stopPropagation()}}))))),("TRANSCONF"===(null===e||void 0===e?void 0:e.paymentStatus)||"STARTED"===(null===e||void 0===e?void 0:e.paymentStatus))&&l.a.createElement(o.f,{className:"container-status-row"},l.a.createElement(o.B,null,l.a.createElement(o.i,{size:"4"},l.a.createElement(o.B,null,l.a.createElement(o.i,{size:"8"},"In Progress"),l.a.createElement(o.i,{size:"4"},l.a.createElement("div",{className:"avatar",style:{backgroundColor:"#FF9F5F"}},null!==(d=((null===e||void 0===e?void 0:e.town)+(null===e||void 0===e?void 0:e.yard)+"").padStart(2,"0"))&&void 0!==d?d:0)))),l.a.createElement(o.i,{size:"4"},l.a.createElement(o.B,null,l.a.createElement(o.i,{size:"8",style:{paddingLeft:"15px"}},"Delivered"),l.a.createElement(o.i,{size:"4"},l.a.createElement("div",{className:"avatar",style:{backgroundColor:"#76BD7D"}},null!==(u=((null===e||void 0===e?void 0:e.delivered)+"").padStart(2,"0"))&&void 0!==u?u:0)))),l.a.createElement(o.i,{size:"4"},l.a.createElement(o.B,null,l.a.createElement(o.i,{size:"8",style:{paddingLeft:"15px"}},"Completed"),l.a.createElement(o.i,{size:"4"},l.a.createElement("div",{className:"avatar",style:{backgroundColor:"#168FE4"}},null!==(v=((null===e||void 0===e?void 0:e.completed)+"").padStart(2,"0"))&&void 0!==v?v:0)))))),"FPAY"===(null===e||void 0===e?void 0:e.paymentStatus)&&l.a.createElement(o.f,{className:"payment-fail-card-content"},l.a.createElement(o.B,null,l.a.createElement(o.i,{size:"1"},l.a.createElement(i.a,{color:"#E91818",bookingCard:!0})),l.a.createElement(o.i,{size:"7"},l.a.createElement(o.u,{className:"payment-text"},"Payment Failed")),l.a.createElement(o.i,{onClick:()=>async function(e){console.log("paymentInfo",e);var a=r.reinitializeUrl+e,t=await Object(s.y)(a);if(await t.success){var n=await t.data.data.dataItems[0].url,l=await t.data.data.dataItems[0].transactionId;await Object(m.a)(n,l)}}(null===e||void 0===e?void 0:e.bookingNumber)},l.a.createElement(o.o,{className:"repayment-icon",src:"assets/icon/refresh.svg"}),l.a.createElement(o.u,{className:"repayment-text"},"Re-initiate")))),"PPAY"===(null===e||void 0===e?void 0:e.paymentStatus)&&l.a.createElement(o.f,{className:"payment-pending-card-content"},l.a.createElement(o.B,null,l.a.createElement(o.i,{size:"1"},l.a.createElement(i.a,{color:"#FFB200",bookingCard:!0})),l.a.createElement(o.i,null,l.a.createElement(o.u,{className:"payment-text"},"Waiting for Payment confirmation")))),"completed"===(null===e||void 0===e?void 0:e.paymentStatus)&&l.a.createElement(o.f,{className:"payment-pending-card-content"},l.a.createElement(o.B,null,l.a.createElement(o.i,{size:"1"},l.a.createElement(i.a,{color:"#1360D2",bookingCard:!0})),l.a.createElement(o.i,null,l.a.createElement(o.u,{className:"payment-text"},"MT IN Delivered")))),"SUCC"===(null===e||void 0===e?void 0:e.paymentStatus)&&l.a.createElement(o.f,{className:"payment-pending-card-content"},l.a.createElement(o.B,null,l.a.createElement(o.i,{size:"1"},l.a.createElement(i.a,{color:"#FFC350",bookingCard:!0})),l.a.createElement(o.i,null,l.a.createElement(o.u,{className:"payment-text"},"Transporter Pending")))))))}),u=t(158),v=t(11),p=t(12),E=t(178),g=(t(249),t(220)),b=t(166),f=t(202);t(250);var N=function(e){const[a,t]=Object(n.useState)("");return Object(n.useEffect)(()=>{(async t=>{e.onSearchBooking(a)})()},[a]),console.log("searchBooking"),l.a.createElement("div",{className:"booking-search"},l.a.createElement(o.C,{className:"searchBar",type:"search",value:a,onIonChange:e=>t(e.detail.value),placeholder:"Search with Booking Number"}))},k=t(49),C=t(182),S=t(192),y=t(181),D=0;function h(e){console.log("MyBookingDetails",e);const a={name:"",slot:"",class:"",iconClick:()=>console.log()},[t,c]=Object(n.useState)([]),[i,m]=Object(n.useState)(!1),[h,O]=Object(n.useState)(""),[w,B]=Object(n.useState)(""),[M,z]=Object(n.useState)(""),[A,F]=Object(n.useState)(),[j,I]=Object(n.useState)(),[P,Y]=Object(n.useState)("DESC"),[T,x]=Object(n.useState)("ASC"),[L,R]=Object(n.useState)(!1),[U,q]=Object(n.useState)(!1),[V,_]=Object(n.useState)(a),[H,J]=Object(n.useState)({}),G=e=>{switch(e){case"ALL":O("ALL BOOKINGS");break;case"PODUPL":O("VERIFY POD'S");break;case"INVSUBMT":O("VERIFY INVOICES");break;default:O("")}};Object(n.useEffect)(()=>(v.a.subscribe(()=>{console.log("Subscribed to store",v.a.getState().VariableValues.paymentStatus),J(v.a.getState().VariableValues.paymentStatus)}),()=>{console.log("destory");let e=Object(k.o)({status:"",reference_num:0});v.a.dispatch(e)}),[]),Object(n.useEffect)(()=>{v.a.subscribe(()=>{I(v.a.getState().CheckUserStatus.user.selectedAgent)}),console.log("Store",v.a.getState().CheckUserStatus.user.selectedAgent);D=0,K("")},[j]);e.history;const K=async function(a){console.log(arguments.length<=1?void 0:arguments[1]);const n=e.match.params.status;B(n),G(n),a||(a="ALL"==n?"sortOrder=".concat(P,"&sortCol=1&pgSize=10&pgNo=0&locale=en"):"statusCode=".concat(n,"&sortOrder=").concat(P,"&sortCol=1&pgSize=10&pgNo=0&locale=en"));let l="".concat(r.bookingDetails,"&").concat(a);var o=await Object(s.w)(l);console.log("BookingDetails fetchdata",o),await o.success&&(c((arguments.length<=1?void 0:arguments[1])?[...o.data.elements]:[...t,...o.data.elements]),console.log(o.data.elements),m(o.data.elements.length<10))};const W=async e=>{let a;1==e?(a="ASC"==P?"DESC":"ASC",Y(a)):(a="ASC"==T?"DESC":"ASC",x(a));let t="sortOrder=".concat(a,"&sortCol=").concat(e,"&pgSize=10&pgNo=0&locale=en");await K(t,!0)},Q=[{name:"",src:"filter",slot:"",type:"button",clickedOnTopMenu:()=>{R(!0)}},{name:"Booked Status",icon:p.j,slot:"end",type:"dropDown",list:[{label:"Pending Payment",value:"PPAY"},{label:"Failed Payment",value:"FPAY"},{label:"Transporter Pending",value:"SUCC"},{label:"Transporter Confirmed",value:"TRANSCONF"},{label:"MT IN Delivered",value:"FPAY"}],clickedOnTopMenu:e=>{console.log("clicked2",e),(async e=>{let a="status=".concat(e,"&pgSize=10&pgNo=0&locale=en");await K(a,!0)})(e.value)}},{name:"Booked on",slot:"start",src:"filter-down-arrow",rotate:"ASC"==P?"rotate(180deg)":"",size:"0.7rem",type:"button",clickedOnTopMenu:()=>W(1)},{name:"Amount",slot:"start",src:"filter-down-arrow",rotate:"ASC"==T?"rotate(180deg)":"",size:"0.7rem",type:"button",clickedOnTopMenu:()=>W(5)}];return l.a.createElement(o.x,{id:"booking-page"},l.a.createElement(u.a,{label:h,action:"search",customBack:!0,backClick:()=>{e.history.push("/tabs/status")},showAgent:!0,agentHeader:!0,searchClick:()=>{q(!U)}}),l.a.createElement(o.j,{fullscreen:!0,"padding-top":!0,scrollEvents:!0,hidden:""!==M,className:"page-content"},""===H.status&&l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{showModal:L,openOrCloseModal:e=>R(e),content:l.a.createElement(f.a,{openOrCloseModalInsearch:(e,a,t)=>{R(e),(async(e,a)=>{if(e&&a){let t="fromDate=".concat(e,"&toDate=").concat(a,"&pgSize=10&pgNo=0&locale=en");await K(t,!0)}})(a,t)},headerName:"Booked On Date Filter"})}),l.a.createElement(o.B,{className:"horizontal-scroll"},U?l.a.createElement(N,{onSearchBooking:async e=>{let a="bookingNumber=".concat(e,"&pgSize=10&pgNo=0&locale=en");await K(a,!0)}}):l.a.createElement(E.a,{topMenuProps:Q})),l.a.createElement("div",{className:"decl-count"}," Displaying ",t.length," bookings"),l.a.createElement(o.m,{"margin-top":!0},t.map((a,t)=>{var n;return l.a.createElement(d,{status:w,key:t,town:null===a||void 0===a?void 0:a.containersToTown,yard:null===a||void 0===a?void 0:a.containersInYard,delivered:null===a||void 0===a?void 0:a.containersDelivered,completed:null===a||void 0===a?void 0:a.containersCompleted,bookingNumber:null===a||void 0===a?void 0:a.bookingNumber,amount:null!==(n=null===a||void 0===a?void 0:a.totalAmount)&&void 0!==n?n:"0 AED",bookedOn:null===a||void 0===a?void 0:a.bookedOn,noOfContainers:null===a||void 0===a?void 0:a.noOfContainers,paymentStatus:null===a||void 0===a?void 0:a.statusCode,noOfTrucks:a.noOfTrucks,clickCard:()=>(a=>{console.log("onCardClick",a);var t=v.a.getState().CheckUserStatus.user.userType;let n={bookingNumber:null===a||void 0===a?void 0:a.bookingNumber,requesterName:null===a||void 0===a?void 0:a.requesterName,requesterContact:null===a||void 0===a?void 0:a.requesterContact,importerComments:null===a||void 0===a?void 0:a.importerComments,totalAmount:null===a||void 0===a?void 0:a.totalAmount,truckCount:null===a||void 0===a?void 0:a.noOfTrucks,containerCount:null===a||void 0===a?void 0:a.noOfContainers,userType:t,cardStatus:e.match.params.status,bookingStatus:null===a||void 0===a?void 0:a.statusCode};e.history.push("/containerDetails",{bookingDetails:n})})(a),paymentClick:e=>{z(e),F(null===a||void 0===a?void 0:a.bookingNumber)}})})),l.a.createElement(o.q,{threshold:"100px",disabled:i,onIonInfinite:a=>async function(a){D+=1,e.match.params.status;var t="sortOrder=".concat(P,"&sortCol=1&pgSize=10&pgNo=").concat(D,"&locale=en");await K(t),a.target.complete()}(a)},l.a.createElement(o.r,{loadingText:"Loading more..."}))),"SUCC"===H.status&&l.a.createElement(C.a,{txnId:H.reference_num}),"FAIL"===H.status&&l.a.createElement(S.a,{txnId:H.reference_num}),"PEND"===H.status&&l.a.createElement(y.a,{txnId:H.reference_num})),l.a.createElement(o.j,{style:{maxHeight:"86px"}},l.a.createElement(g.default,{tab:"status"})))}}}]);
//# sourceMappingURL=18.112d8326.chunk.js.map