{"version":3,"sources":["pages/pushNotification/Notifications.tsx"],"names":["Notifications","props","console","log","newnNotfication","setNewNotification","useState","refresh","setRefresh","accessedNotfication","setAccessedNotfication","agent","setAgent","Store","subscribe","getState","CheckUserStatus","user","selectedAgent","useEffect","httpGetCallWithoutHeader","EndPointURL","then","result","success","JSON","stringify","data","dataItems","data1","filter","item","accessed","data2","id","label","action","showAgent","agentHeader","padding-top","className","fullscreen","scrollEvents","scrollY","size","length","map","index","key","onClick","async","resId","appLink","appUrl","response","httpPostCallWithoutHeaderAndBody","prev","history","push","onNewNotificationClick","responseUuid","appNotificationDto","message","duration","style","maxHeight","selected"],"mappings":"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","file":"static/js/28.b7db30c3.chunk.js","sourcesContent":["import {\r\n  IonCol,\r\n  IonContent,\r\n  IonLabel,\r\n  IonPage,\r\n  IonRow,\r\n} from \"@ionic/react\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport * as EndPointURL from \"../../util/EndPointURL\";\r\nimport {\r\n  httpGetCallWithoutHeader,\r\n  httpPostCallWithoutHeaderAndBody\r\n} from \"../../services/EndPointApi\";\r\nimport \"./Notifications.scss\";\r\nimport MainTabs from \"../MainTabs\";\r\nimport Store from \"../../redux/Store\";\r\nimport Header from \"../../components/Header\";\r\n\r\nexport default function Notifications(props: any) {\r\n  console.log(props);\r\n  const [newnNotfication, setNewNotification] = useState([]);\r\n  const [refresh, setRefresh] = useState(0);\r\n  const [accessedNotfication, setAccessedNotfication] = useState([]);\r\n  const [agent, setAgent] = useState();\r\n  Store.subscribe(() => {\r\n    setAgent(Store.getState().CheckUserStatus.user.selectedAgent);\r\n  });\r\n\r\n  useEffect(() => {\r\n    var response = httpGetCallWithoutHeader(\r\n      EndPointURL.fetchAllNotificationUrl\r\n    );\r\n    response.then((result) => {\r\n      if (result.success) {\r\n        console.log(\"result\", JSON.stringify(result.data.data.dataItems));\r\n        let data1 = result.data.data.dataItems.filter(\r\n          (item) => item.accessed === \"N\"\r\n        );\r\n        console.log(\"data1\", JSON.stringify(data1));\r\n        setNewNotification(data1);\r\n        let data2 = result.data.data.dataItems.filter(\r\n          (item) => item.accessed === \"Y\"\r\n        );\r\n        console.log(\"data2\", JSON.stringify(data2));\r\n        setAccessedNotfication(data2);\r\n      }\r\n    });\r\n  }, [agent, refresh]);\r\n\r\n  const onNewNotificationClick = async (resId, appLink) => {\r\n    let appUrl = EndPointURL.fetchAllNotificationUrl + \"/\" + resId;\r\n    var response = await httpPostCallWithoutHeaderAndBody(appUrl);\r\n    if (await response.success) {\r\n      setRefresh(prev => prev+1)\r\n      if (appLink !== null) props.history.push(appLink);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IonPage id=\"notifications-page\">\r\n      <Header\r\n        label=\"Notifications\"\r\n        action=\"search\"\r\n        showAgent={true}\r\n        agentHeader={true}\r\n      />\r\n      <IonContent\r\n        padding-top\r\n        className=\"page-content\"\r\n        fullscreen\r\n        scrollEvents={true}\r\n        scrollY={true}\r\n      >\r\n        <IonRow className=\"divider\">\r\n          <IonCol size=\"12\" className=\"full-width\">\r\n            <IonRow className=\"sort-divider\">\r\n              <IonLabel className=\"data-font\">New</IonLabel>\r\n            </IonRow>\r\n          </IonCol>\r\n          {newnNotfication.length > 0 ? (\r\n            newnNotfication\r\n              .filter((item) => item.accessed === \"N\")\r\n              .map((item, index) => (\r\n                <IonCol\r\n                  size=\"12\"\r\n                  className=\"full-width\"\r\n                  key={index}\r\n                  onClick={() =>\r\n                    onNewNotificationClick(\r\n                      item.responseUuid,\r\n                      item.appNotificationDto.appLink\r\n                    )\r\n                  }\r\n                >\r\n                  <IonRow>\r\n                    <IonLabel className=\"notification-font\">\r\n                      {item.appNotificationDto.message}\r\n                    </IonLabel>\r\n                  </IonRow>\r\n                  <IonRow>\r\n                    <IonLabel className=\"notification-date\">\r\n                      {item.duration}\r\n                    </IonLabel>\r\n                  </IonRow>\r\n                </IonCol>\r\n              ))\r\n          ) : (\r\n            <IonCol size=\"12\" className=\"full-width ion-text-center\">\r\n              <IonLabel className=\"notification-date\">\r\n                No Notification to show\r\n              </IonLabel>\r\n            </IonCol>\r\n          )}\r\n        </IonRow>\r\n        <IonRow className=\"accessed-status\">\r\n          <IonCol size=\"12\" className=\"full-width\">\r\n            <IonRow className=\"sort-divider\">\r\n              <IonLabel className=\"data-font\">Earlier</IonLabel>\r\n            </IonRow>\r\n          </IonCol>\r\n          {accessedNotfication.length > 0 ? (\r\n            accessedNotfication\r\n              .filter((item) => item.accessed === \"Y\")\r\n              .map((item, index) => (\r\n                <IonCol size=\"12\" className=\"full-width\" key={index}>\r\n                  <IonRow\r\n                    onClick={() => {\r\n                      if (item.appNotificationDto.appLink !== null)\r\n                        props.history.push(item.appNotificationDto.appLink);\r\n                    }}\r\n                  >\r\n                    <IonLabel className=\"notification-font\">\r\n                      {item.appNotificationDto.message}\r\n                    </IonLabel>\r\n                  </IonRow>\r\n                  <IonRow>\r\n                    <IonLabel className=\"notification-date\">\r\n                      {item.duration}\r\n                    </IonLabel>\r\n                  </IonRow>\r\n                </IonCol>\r\n              ))\r\n          ) : (\r\n            <IonCol size=\"12\" className=\"full-width ion-text-center\">\r\n              <IonLabel className=\"notification-date\">\r\n                No Notification to show\r\n              </IonLabel>\r\n            </IonCol>\r\n          )}\r\n        </IonRow>\r\n      </IonContent>\r\n      <IonContent style={{ maxHeight: \"86px\" }}>\r\n        <MainTabs selected={true} />\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n}\r\n"],"sourceRoot":""}